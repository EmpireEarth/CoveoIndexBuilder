{
    "title" : "System.Net.CookieException with third party js and coveo",
    "uri" : "http://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "printableUri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "clickUri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "excerpt" : "I have recently implemented coveo search page using sitecore and asp.net ... My prototype works fine until I integrated that page in our existing web page. ... We have some third party Javascripts ...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1120,
    "percentScore" : 75.30528,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "System.Net.CookieException with third party js and coveo",
      "sysauthor" : "sid",
      "sysurihash" : "zkhhZiF822uCqzyw",
      "urihash" : "zkhhZiF822uCqzyw",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160356,
      "questionaskeddatestring" : "·\n            Oct 29, 2015 at 04:44 PM ·",
      "tags" : [ "coveoforsitecore", "sitecore", "cookie" ],
      "sysconcepts" : "cookies ; coveo search ; third parties ; existing web ; control ; asp ; sitecore ; config ; repecting ; VerifySetDefaults ; CopyIncomingRequest ; ProxyHttpHandler",
      "concepts" : "cookies ; coveo search ; third parties ; existing web ; control ; asp ; sitecore ; config ; repecting ; VerifySetDefaults ; CopyIncomingRequest ; ProxyHttpHandler",
      "printableuri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517942432000,
      "permanentid" : "f1cf0fc8a2dd68f7a09624c7882189a6f075f30161b504f9bfac75c1b576",
      "syslanguage" : [ "English" ],
      "transactionid" : 160356,
      "title" : "System.Net.CookieException with third party js and coveo",
      "date" : 1451347200000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Simon" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "Jean-François L'Heureux \u2666\u2666" ],
      "hasacceptedanswer" : "false",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5447992,
      "numberofcomments" : 1,
      "size" : 74240,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911578291,
      "acceptedanswers" : 0,
      "syssize" : 74240,
      "sysdate" : 1451347200000,
      "author" : "sid",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>Hi,</p> \n<p>I have recently implemented coveo search page using sitecore and <a rel=\"nofollow\" href=\"http://asp.net\">asp.net</a></p> \n<p>My prototype works fine until I integrated that page in our existing web page. We have some third party Javascripts that creates some cookies which is used for some other purpose and we dont have any control on them. This is on our existing web pages.</p> \n<p>Now when I integrate Coveo search page on to this web site, I'm seeing the following error.</p> \n<pre><code> **The 'Value'='{\"XX\":\"http%3A%2F%2Fwww.XXXXX.com%2F\",\"X\":\"\"}' part of the cookie is invalid.**\n Source: System\n    at System.Net.Cookie.VerifySetDefaults(CookieVariant variant, Uri uri, Boolean isLocalDomain, String localDomain, Boolean set_default, Boolean isThrow)\n    at System.Net.CookieContainer.Add(Cookie cookie)\n    at Coveo.Search.Api.Proxy.ProxyHttpHandler.CopyIncomingRequest(HttpRequest from, HttpWebRequest to)\n    at Coveo.Search.Api.Proxy.ProxyHttpHandler.ReverseProxyRequest(HttpContext context)\n    at Coveo.Search.Api.Proxy.ProxyHttpHandler.OnReverseProxyRequest(HttpContext context)\n    at Coveo.SearchProvider.Rest.SitecoreRestHttpHandler.OnReverseProxyRequest(HttpContext p_Context)\n    at Coveo.Search.Api.Proxy.ProxyHttpHandler.ProcessRequest(HttpContext context)\n    at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n    at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)\n\n</code></pre> \n<p>I'm seeing this error when I have that particular cookie. When looking into it more, i found that in Coveo.Search.Api.Proxy.ProxyHttpHandler.CopyIncomingRequest is looping through all the existing cookies in the domain and adding them.</p> \n<p><strong>HttpWebRequest.CookieContainer.Add(cookie)</strong></p> \n<p>in here when its adding the cookie, and throwing the error. i think this is expecting an encoded value or something which we dont have any control on that cookie. When i delete that particular issue causing cookie, my coveo search page works fine. <strong>But we need that cookie in our existing website.</strong></p> \n<p><strong>So is there a way to solve this issue? a setting or something on coveo side?</strong></p> \n<p>We dont have any issues with this cookies untill now and we dont want to change the value of cookie just because of this.</p> \n<p>Thanks for all the help !!!</p>\n                </div>",
      "sitemaplastmodified" : 1451347200000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517942432000,
      "questionnumber" : 6475,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "sid",
      "sitename" : "Answers",
      "sysrowid" : 5447992,
      "uri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "System.Net.CookieException with third party js and coveo",
    "Uri" : "http://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "PrintableUri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "ClickUri" : "https://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/6475/systemnetcookieexception-with-third-party-js-and-c.html",
    "Excerpt" : "I have recently implemented coveo search page using sitecore and asp.net ... My prototype works fine until I integrated that page in our existing web page. ... We have some third party Javascripts ...",
    "FirstSentences" : null
  }