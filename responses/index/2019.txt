{
    "title" : "Could not establish trust relationship for SSL\\TLS",
    "uri" : "http://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "printableUri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "clickUri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "excerpt" : "We're completing a large roll out of Coveo across multiple servers. ... We've been following the provided documentation for how to configure Coveo for Sitecore without running the setup wizard thro...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1116,
    "percentScore" : 75.17069,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Could not establish trust relationship for SSL\\TLS",
      "sysauthor" : "nickstephens",
      "sysurihash" : "j3IfWIHñb1SGi8k5",
      "urihash" : "j3IfWIHñb1SGi8k5",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160354,
      "questionaskeddatestring" : "·\n            Oct 08, 2015 at 03:09 PM ·",
      "tags" : [ "coveoforsitecore", "installation", "installerror" ],
      "sysconcepts" : "Admin service ; Sitecore ; documentation ; servers ; installation ; certificates ; port ; store ; support call ; Search API ; thumbprint ; SearchProvider ; investigating ; developers ; invocation ; connection",
      "concepts" : "Admin service ; Sitecore ; documentation ; servers ; installation ; certificates ; port ; store ; support call ; Search API ; thumbprint ; SearchProvider ; investigating ; developers ; invocation ; connection",
      "printableuri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517942332000,
      "permanentid" : "80ac537b579c7699c99e9bd7c76fa4a112a7f1ab25375bd9d846bdadb947",
      "syslanguage" : [ "English" ],
      "transactionid" : 160354,
      "title" : "Could not establish trust relationship for SSL\\TLS",
      "date" : 1444867200000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Jean-François L'Heureux" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "Jean-François L'Heureux \u2666\u2666", "Jean-François L'Heureux \u2666\u2666", "nickstephens" ],
      "hasacceptedanswer" : "true",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5447851,
      "numberofcomments" : 3,
      "size" : 93408,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911578150,
      "acceptedanswers" : 1,
      "syssize" : 93408,
      "sysdate" : 1444867200000,
      "author" : "nickstephens",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>We're completing a large roll out of Coveo across multiple servers. We've been following the provided documentation for how to configure Coveo for Sitecore without running the setup wizard through Sitecore. We've also followed the standard installation documentation for installing CES. As a part of that install, we elected to secure the Admin Service.</p> \n<p>We are currently not able to access Control Panel -> Indexing to rebuild the indexes. This is a key step, based on the documentation, in order to have CES establish the connection to Sitecore and generate the correct certificates which will then be used to configure the Search API. </p> \n<p>Any ideas as how to begin diagnosing this error?</p> \n<p>The error that I'm receiving is below:</p> \n<pre><code> System.ServiceModel.Security.SecurityNegotiationException: Could not establish trust relationship for the SSL/TLS secure channel with authority '[Server]'. ---> System.Net.WebException: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel. ---> System.Security.Authentication.AuthenticationException: The remote certificate is invalid according to the validation procedure.\n    at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)\n    at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)\n    at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)\n    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n    at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n    at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n    at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)\n    at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)\n    at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)\n    at System.Net.ConnectStream.WriteHeaders(Boolean async)\n    --- End of inner exception stack trace ---\n    at System.Net.HttpWebRequest.GetResponse()\n    at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n    --- End of inner exception stack trace ---\n \n Server stack trace: \n    at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)\n    at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n    at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)\n    at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n    at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n    at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n \n Exception rethrown at [0]: \n    at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n    at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)\n    at Coveo.AdminService.AdminService.IAdminService.Authenticate(String p_Username, String p_Password)\n    at Coveo.AdminService.AdminServiceAuthenticatedCallPerformer.PerformCall[T](Func`1 p_Call)\n    at Coveo.AdminService.AdminServiceClientWrapper.PerformAdminServiceCall[T](Func`1 p_Func)\n    at Coveo.AdminService.AdminServiceClientWrapper.IsSecurityProviderHealthy(String p_SecurityProviderName)\n    at Coveo.SearchProvider.Applications.StateVerifier.<>c__DisplayClass13.<GetSecurityProviderState>b__12()\n    at Coveo.SearchProvider.Applications.BaseVerifier.VerifyComponent(Func`1 p_VerifyMethod, String p_ComponentName)\n\n</code></pre> \n<p>The stack trace in the Sitecore log is:</p> \n<pre><code> 10780 14:10:49 ERROR An error while Initializing occurred\n Exception: System.ServiceModel.Security.SecurityNegotiationException\n Message: Could not establish trust relationship for the SSL/TLS secure channel with authority '[server]'.\n Source: mscorlib\n Server stack trace:\n at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)\n at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)\n at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n Exception rethrown at [0]:\n at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)\n at Coveo.AdminService.AdminService.IAdminService.Authenticate(String p_Username, String p_Password)\n at Coveo.AdminService.AdminServiceAuthenticatedCallPerformer.PerformCall[T](Func`1 p_Call)\n at Coveo.AdminService.AdminServiceClientWrapper.PerformAdminServiceCall[T](Func`1 p_Func)\n at Coveo.AdminService.AdminServiceClientWrapper.IsFirstTimeSetupDone()\n at Coveo.AbstractLayer.Communication.CES.AdminModule.InitializeCes()\n at Coveo.AbstractLayer.Communication.CES.CESCommunication.InitializeCes()\n at Coveo.SearchProvider.ProviderIndexBase.Initialize(IIndexDocumentPropertyMapper`1 p_DocumentTypeMapper)\n Nested Exception\n Exception: System.Net.WebException\n Message: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\n Source: System\n at System.Net.HttpWebRequest.GetResponse()\n at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n Nested Exception\n Exception: System.Security.Authentication.AuthenticationException\n Message: The remote certificate is invalid according to the validation procedure.\n Source: System\n at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)\n at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)\n at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)\n at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)\n at System.Net.ConnectStream.WriteHeaders(Boolean async)\n 10780 14:10:49 ERROR Error loading hook:\n Exception: System.Reflection.TargetInvocationException\n Message: Exception has been thrown by the target of an invocation.\n Source: mscorlib\n at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)\n at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)\n at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\n at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)\n at Sitecore.Configuration.Factory.AssignProperties(Object obj, Object[] properties)\n at Sitecore.Configuration.Factory.AssignProperties(XmlNode configNode, String[] parameters, Object obj, Boolean assert, Boolean deferred, IFactoryHelper helper)\n at Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper)\n at Sitecore.Configuration.Factory.CreateObject(String configPath, String[] parameters, Boolean assert)\n at Sitecore.ContentSearch.ContentSearchManager.get_SearchConfiguration()\n at Sitecore.ContentSearch.Hooks.Initializer.Initialize()\n at Sitecore.Events.Hooks.HookManager.LoadAll()\n Nested Exception\n Exception: System.ServiceModel.Security.SecurityNegotiationException\n Message: Could not establish trust relationship for the SSL/TLS secure channel with authority '[server]'.\n Source: mscorlib\n Server stack trace:\n at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)\n at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)\n at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n Exception rethrown at [0]:\n at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)\n at Coveo.AdminService.AdminService.IAdminService.Authenticate(String p_Username, String p_Password)\n at Coveo.AdminService.AdminServiceAuthenticatedCallPerformer.PerformCall[T](Func`1 p_Call)\n at Coveo.AdminService.AdminServiceClientWrapper.PerformAdminServiceCall[T](Func`1 p_Func)\n at Coveo.AdminService.AdminServiceClientWrapper.IsFirstTimeSetupDone()\n at Coveo.AbstractLayer.Communication.CES.AdminModule.InitializeCes()\n at Coveo.AbstractLayer.Communication.CES.CESCommunication.InitializeCes()\n at Coveo.SearchProvider.ProviderIndexBase.Initialize(IIndexDocumentPropertyMapper`1 p_DocumentTypeMapper)\n at Coveo.SearchProvider.ProviderIndex.Initialize()\n at Coveo.SearchProvider.Configuration.CoveoSearchConfiguration.AddIndex(ISearchIndex p_Index)\n Nested Exception\n Exception: System.Net.WebException\n Message: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\n Source: System\n at System.Net.HttpWebRequest.GetResponse()\n at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n Nested Exception\n Exception: System.Security.Authentication.AuthenticationException\n Message: The remote certificate is invalid according to the validation procedure.\n Source: System\n at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)\n at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)\n at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)\n at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)\n at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)\n at System.Net.ConnectStream.WriteHeaders(Boolean async)\n</code></pre>\n                </div>",
      "sitemaplastmodified" : 1444867200000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517942332000,
      "questionnumber" : 6234,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "nickstephens",
      "sitename" : "Answers",
      "sysrowid" : 5447851,
      "uri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Could not establish trust relationship for SSL\\TLS",
    "Uri" : "http://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "PrintableUri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "ClickUri" : "https://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/6234/could-not-establish-trust-relationship-for-ssltls.html",
    "Excerpt" : "We're completing a large roll out of Coveo across multiple servers. ... We've been following the provided documentation for how to configure Coveo for Sitecore without running the setup wizard thro...",
    "FirstSentences" : null
  }