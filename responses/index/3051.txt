{
    "title" : "Requirejs and Coveo for Sitecore 4 Configuration",
    "uri" : "http://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "printableUri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "clickUri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "excerpt" : "Requirejs and Coveo for Sitecore 4 Configuration ... We need some help with configuring the latest version of Coveo For Sitecore 4 to work with our within our solution. ... We're upgrading our curr...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1165,
    "percentScore" : 76.803215,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Requirejs and Coveo for Sitecore 4 Configuration",
      "sysauthor" : "ndaigle66",
      "sysurihash" : "Fio6pOr745w0Wlf7",
      "urihash" : "Fio6pOr745w0Wlf7",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160363,
      "questionaskeddatestring" : "·\n            Jan 03, 2017 at 11:12 AM ·",
      "tags" : [ "coveoforsitecore", "coveo", "coveoforsitecore4", "requirejs" ],
      "sysconcepts" : "coveo ; requirejs ; sitecore ; configuration ; release ; own variable ; coveoForSitecore ; framework ; practices ; worked pefectly ; AMD loaders ; componentsOptions ; non-RequireJS ; guidelines ; SearchViewResources",
      "concepts" : "coveo ; requirejs ; sitecore ; configuration ; release ; own variable ; coveoForSitecore ; framework ; practices ; worked pefectly ; AMD loaders ; componentsOptions ; non-RequireJS ; guidelines ; SearchViewResources",
      "printableuri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517942925000,
      "permanentid" : "652975fd666e5bad4a483155ee366b838cb17302ae2da54ebbf4118ea8bf",
      "syslanguage" : [ "English" ],
      "transactionid" : 160363,
      "title" : "Requirejs and Coveo for Sitecore 4 Configuration",
      "date" : 1483401600000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "François Lachance-Guillemette" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "ndaigle66" ],
      "hasacceptedanswer" : "true",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5448658,
      "numberofcomments" : 1,
      "size" : 77218,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911578938,
      "acceptedanswers" : 1,
      "syssize" : 77218,
      "sysdate" : 1483401600000,
      "author" : "ndaigle66",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>We need some help with configuring the latest version of Coveo For Sitecore 4 to work with our within our solution. We're upgrading our current solution from 8.1 initial to the 8.2 initial release. At the same time we're updating from Coveo for Sitecore 3 (1188) to Coveo for Sitecore 4 (780). We're currently only using the Search View. </p> \n<p>Our solution uses RequireJs to load js for individual modules on our site. In the 1188 release we were able to add the scripts for the search view to our Requirejs config.</p> \n<pre><code> requirejs.config({\n \n     // establish the baseUrl for our JS files\n     \"baseUrl\": \"/scripts\",\n \n     // Paths are like aliases. You can alias both paths and file names.\n     \"paths\": {\n         ... other files ...\n         \"coveodependencies\": \"../coveo/js/CoveoJsSearch.WithDependencies.min\",\n         \"coveodepolyfills\": \"../coveo/js/CoveoForSitecorePolyfills\",\n         \"coveod3\": \"../coveo/js/d3.min\",\n         \"coveo\": \"../coveo/js/CoveoForSitecore\",\n         \"coveodedeferredfresh\": \"../coveo/js/PageEditorDeferRefresh\",\n         \"coveoen\": \"../coveo/js/cultures/en\"\n     },\n \n     // Configure dependencies\n     \"shim\": {\n         'coveoen': {\n             deps: ['coveodependencies']\n         },\n         'coveo': {\n             deps: ['coveodependencies', 'coveodepolyfills', 'coveod3', 'coveoen'],\n             exports: 'Coveo'\n         },\n         'coveodedeferredfresh': {\n             deps: ['coveo']\n         }\n     }\n });\n\n  \n</code></pre> \n<p>We were then able to replace the script tags in the SearchView.cshtml and SearchViewResources.cshtml with the require syntax ie:</p> \n<pre><code> --original--\n <script type=\"text/javascript\">\n     Coveo.$(function() {\n         Coveo.$('#search').coveoForSitecore('init', CoveoForSitecore.componentsOptions);\n     });\n </script>\n \n --ours--\n <script>\n     require([\"coveo\"], function () {\n         Coveo.$(function() {\n             Coveo.$('#search')\n             .on(\"buildingQuery\", function(e, args) {\n                 args.queryBuilder.constantExpression.add('@(Model.ToCoveoFieldName(\"issearchable\")) == \"1\"' +\n                     ' AND (@(Model.ToCoveoFieldName(\"name\")) <> \"__Standard Values\"' +\n                     ' AND @(Model.ToCoveoFieldName(\"name\")) <> \"$name\")'\n                     );\n             }).coveoForSitecore('init', CoveoForSitecore.componentsOptions);\n         });\n     });\n </script>\n\n  \n</code></pre> \n<p>This configuration no longer works with latest version of coveo for sitecore 4. Running with the default view files leads to issues as well. There appears to be a conflict with the global define and require functions. Looking at this <a rel=\"nofollow\" href=\"https://answers.coveo.com/questions/8342/require-js-and-coveo\">post</a> I see that changes were made to better facilitate AMD loaders like requirejs. Are there any guidelines or best practices for configuring Coveo to work with requirejs?</p>\n                </div>",
      "sitemaplastmodified" : 1483401600000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517942925000,
      "questionnumber" : 10069,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "ndaigle66",
      "sitename" : "Answers",
      "sysrowid" : 5448658,
      "uri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Requirejs and Coveo for Sitecore 4 Configuration",
    "Uri" : "http://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "PrintableUri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "ClickUri" : "https://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/10069/requirejs-and-coveo-for-sitecore-4-configuration.html",
    "Excerpt" : "Requirejs and Coveo for Sitecore 4 Configuration ... We need some help with configuring the latest version of Coveo For Sitecore 4 to work with our within our solution. ... We're upgrading our curr...",
    "FirstSentences" : null
  }