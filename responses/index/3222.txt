{
    "title" : "Coveo errors after Sitecore 7.2 upgrade",
    "uri" : "http://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "printableUri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "clickUri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "excerpt" : "We upgraded our Sitecore from 7.0 -> 7.2 last night, and in tandem also upgraded our Coveo Enterprise Search to 7.0 x64 8541, Coveo Search API to v8.0.1127 and Coveo for Sitecore (not sure which ve...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1150,
    "percentScore" : 76.307175,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Coveo errors after Sitecore 7.2 upgrade",
      "sysauthor" : "Paul Aldrich",
      "sysurihash" : "xsaLxFIfXCAFApAz",
      "urihash" : "xsaLxFIfXCAFApAz",
      "numberofanswers" : 2,
      "sysuri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160361,
      "questionaskeddatestring" : "·\n            Oct 04, 2016 at 05:30 PM ·",
      "tags" : [ "rest" ],
      "sysconcepts" : "coveo ; Sitecore ; searches ; diagnostics ; configuration files ; configs ; support ticket ; precondition failed ; developers ; production ; documentation ; controllerContext ; environment ; ShowConfig ; assemblies ; troubleshooting",
      "concepts" : "coveo ; Sitecore ; searches ; diagnostics ; configuration files ; configs ; support ticket ; precondition failed ; developers ; production ; documentation ; controllerContext ; environment ; ShowConfig ; assemblies ; troubleshooting",
      "printableuri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517942780000,
      "permanentid" : "1b077129c53bee2103a08460638e478a0813f3f46a9d226136afa637ccf4",
      "syslanguage" : [ "English" ],
      "transactionid" : 160361,
      "title" : "Coveo errors after Sitecore 7.2 upgrade",
      "date" : 1475712000000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Paul Aldrich", "Jean-François L'Heureux" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "Gordon Kessler", "Jean-François L'Heureux \u2666\u2666" ],
      "hasacceptedanswer" : "true",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5448466,
      "numberofcomments" : 2,
      "size" : 90857,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911578765,
      "acceptedanswers" : 1,
      "syssize" : 90857,
      "sysdate" : 1475712000000,
      "author" : "Paul Aldrich",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>We upgraded our Sitecore from 7.0 -> 7.2 last night, and in tandem also upgraded our Coveo Enterprise Search to 7.0 x64 8541, Coveo Search API to v8.0.1127 and Coveo for Sitecore (not sure which version we upgraded to for that). We've gotten to the point where the diagnostics page is not showing any errors; however, we are seeing two different issues.</p> \n<ol> \n <li><p> Our <strong>production</strong> environment is throwing errors on our search page such as: <em>System.ArgumentNullException: Precondition failed: The parameter 'FieldMap' must not be null</em></p> </li> \n</ol> \n<p>Stack Trace:</p> \n<pre><code> System.InvalidOperationException: Error while rendering view: '/Views/Shared/_Layout.cshtml' (model: 'Sitecore.Mvc.Presentation.RenderingModel, Sitecore.Mvc').\n  ---> System.InvalidOperationException: Error while rendering view: '/Views/Search/ResultPageView.cshtml' (model: 'Coveo.Company.Models.ResultPageModel, Coveo.Company').\n  ---> System.InvalidOperationException: Error while rendering view: '/Views/Coveo/FacetView.cshtml' (model: 'Coveo.UI.Mvc.Models.FacetModel, Coveo.UIBase').\n  ---> System.ArgumentNullException: Precondition failed: The parameter 'FieldMap' must not be null\n Parameter name: FieldMap\n    at Coveo.Framework.CNL.Precondition.NotNull(Object p_Parameter, String p_ParameterName)\n    at Coveo.Framework.Fields.CoveoFieldNameTranslator.TranslateToCoveoFormat(String p_SitecoreFieldName, Boolean p_UsePrefix)\n    at Coveo.UI.Helpers.ParametersHelper.GetItemFieldNameParam(String p_ParameterName, Func`2 p_GetItemFieldNameMethod)\n    at Coveo.UI.Mvc.Models.FacetModel.ValidateModel()\n    at ASP._Page_Views_Coveo_FacetView_cshtml.Execute() in d:\\company.com\\Website\\Views\\Coveo\\FacetView.cshtml:line 7\n    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()\n    at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()\n    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)\n    at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)\n    at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)\n    --- End of inner exception stack trace ---\n    at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)\n    at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Render(Renderer renderer, TextWriter writer, RenderRenderingArgs args)\n    at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Process(RenderRenderingArgs args)\n    at (Object , Object[] )\n    at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)\n    at Sitecore.Mvc.Pipelines.PipelineService.RunPipeline[TArgs](String pipelineName, TArgs args)\n    at Sitecore.Mvc.Pipelines.Response.RenderPlaceholder.PerformRendering.Render(String placeholderName, TextWriter writer, RenderPlaceholderArgs args)\n    at (Object , Object[] )\n    at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)\n    at Sitecore.Mvc.Pipelines.PipelineService.RunPipeline[TArgs](String pipelineName, TArgs args)\n    at Sitecore.Mvc.Helpers.SitecoreHelper.Placeholder(String placeholderName)\n    at ASP._Page_Views_Search_ResultPageView_cshtml.Execute() in d:\\company.com\\Website\\Views\\Search\\ResultPageView.cshtml:line 80\n    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()\n    at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()\n    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)\n    at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)\n    at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)\n    --- End of inner exception stack trace ---\n    at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)\n    at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Render(Renderer renderer, TextWriter writer, RenderRenderingArgs args)\n    at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Process(RenderRenderingArgs args)\n    at (Object , Object[] )\n    at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)\n    at Sitecore.Mvc.Pipelines.PipelineService.RunPipeline[TArgs](String pipelineName, TArgs args)\n    at Sitecore.Mvc.Pipelines.Response.RenderPlaceholder.PerformRendering.Render(String placeholderName, TextWriter writer, RenderPlaceholderArgs args)\n    at (Object , Object[] )\n    at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)\n    at Sitecore.Mvc.Pipelines.PipelineService.RunPipeline[TArgs](String pipelineName, TArgs args)\n    at Sitecore.Mvc.Helpers.SitecoreHelper.Placeholder(String placeholderName)\n    at ASP._Page_Views_Shared__Layout_cshtml.Execute() in d:\\company.com\\Website\\Views\\Shared\\_Layout.cshtml:line 292\n    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()\n    at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()\n    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)\n    at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)\n    at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)\n    --- End of inner exception stack trace ---\n    at Sitecore.Mvc.Presentation.ViewRenderer.Render(TextWriter writer)\n    at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Render(Renderer renderer, TextWriter writer, RenderRenderingArgs args)\n    at Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer.Process(RenderRenderingArgs args)\n    at (Object , Object[] )\n    at Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args)\n    at Sitecore.Mvc.Pipelines.PipelineService.RunPipeline[TArgs](String pipelineName, TArgs args)\n    at Sitecore.Mvc.Presentation.RenderingView.Render(ViewContext viewContext, TextWriter writer)\n    at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n    at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilterRecursive(IList`1 filters, Int32 filterIndex, ResultExecutingContext preContext, ControllerContext controllerContext, ActionResult actionResult)\n    at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilterRecursive(IList`1 filters, Int32 filterIndex, ResultExecutingContext preContext, ControllerContext controllerContext, ActionResult actionResult)\n    at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilterRecursive(IList`1 filters, Int32 filterIndex, ResultExecutingContext preContext, ControllerContext controllerContext, ActionResult actionResult)\n    at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)\n    at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)\n\n</code></pre> \n<p>We are seeing this error with precondition failed very often in the logs; more than once a minute.</p> \n<ol> \n <li><p> On our <strong>staging</strong> environment we are able to open the search page, but searches return nothing.</p> </li> \n</ol> \n<p>In the developer console of Chrome we see errors such as:</p> \n<pre><code> [\"ERROR\", t, \"REST request failed\", 500, undefined, Object]\n [\"ERROR\", r, \"Query triggered an error\", Object, t]\n\n</code></pre> \n<p>We've been scouring our configs and the logs for any helpful info but so far nothing we've done has had any effect. Navigating to instance/coveo/rest returns JSON output. Is there anything else we can check?</p> \n<p>Thanks, Paul</p>\n                </div>",
      "sitemaplastmodified" : 1475712000000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517942780000,
      "questionnumber" : 9174,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "Paul Aldrich",
      "sitename" : "Answers",
      "sysrowid" : 5448466,
      "uri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Coveo errors after Sitecore 7.2 upgrade",
    "Uri" : "http://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "PrintableUri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "ClickUri" : "https://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/9174/coveo-errors-after-sitecore-72-upgrade.html",
    "Excerpt" : "We upgraded our Sitecore from 7.0 -> 7.2 last night, and in tandem also upgraded our Coveo Enterprise Search to 7.0 x64 8541, Coveo Search API to v8.0.1127 and Coveo for Sitecore (not sure which ve...",
    "FirstSentences" : null
  }