{
    "title" : "Removing a Field from DocumentInfo during PostConversion",
    "uri" : "http://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "printableUri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "clickUri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "excerpt" : "This works in all cases except the case that I am given a field value of just delimiters ( | | ), in this case the cleaning function returns an empty string (there are no values to facet on) but, w...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1127,
    "percentScore" : 75.54025,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Removing a Field from DocumentInfo during PostConversion",
      "sysauthor" : "sirfergall",
      "sysurihash" : "8WDqiZndNPyK42fC",
      "urihash" : "8WDqiZndNPyK42fC",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160357,
      "questionaskeddatestring" : "·\n            Mar 09, 2016 at 01:56 PM ·",
      "tags" : [ "fields", "postconversion", "conversion" ],
      "sysconcepts" : "empty strings ; mapping file ; document details ; pipesepfield ; select statement ; post conversion ; metadata ; cleaning ; postconversion ; database connector ; SetFieldValue ; GetFieldValue ; DocumentInfo ; delimiters ; sirfergall",
      "concepts" : "empty strings ; mapping file ; document details ; pipesepfield ; select statement ; post conversion ; metadata ; cleaning ; postconversion ; database connector ; SetFieldValue ; GetFieldValue ; DocumentInfo ; delimiters ; sirfergall",
      "printableuri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517942517000,
      "permanentid" : "a1f98bf25c3d9186574c20801fb2c00dfbcac5682ac58997dc4c47f020de",
      "syslanguage" : [ "English" ],
      "transactionid" : 160357,
      "title" : "Removing a Field from DocumentInfo during PostConversion",
      "date" : 1457568000000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Sebastien Desilets" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "sirfergall", "Sebastien Desilets", "sirfergall", "Sebastien Desilets", "sirfergall" ],
      "hasacceptedanswer" : "false",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5448112,
      "numberofcomments" : 5,
      "size" : 82879,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911578411,
      "acceptedanswers" : 0,
      "syssize" : 82879,
      "sysdate" : 1457568000000,
      "author" : "sirfergall",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>Hello, I'm using the December (2015) Release of Coveo Enterprise Search and I'm noticing some strange behavior in my postconversion scripts.</p> \n<p>One of our sources indexes metadata with pipe-delimitted values (apple | orange | banana). I run this through a cleaning function in my postconversion script so that it can be used as a multi-value facetable field (apple | orange | banana) -> (apple;orange;banana) and set the value of the field to the clean value. This works in all cases except the case that I am given a field value of just delimiters ( | | ), in this case the cleaning function returns an empty string (there are no values to facet on) but, when I index the source and view the field in Coveo, it's value remains as \" | | \".</p> \n<p>I put some some traces in my code to see what's going on and have noticed that when attempting to set a field from the DocumentInfo to an empty string, for the duration of the postconversion script, the value of the field is the empty string it was set to, but after indexing and viewing the field in the document details, the field's value remains as \" | | \".</p> \n<p>Below is some sample code to illustrate my point:</p> \n<pre><code> public override void RunPostConverter(PostConversion postConversion, DocumentInfo documentInfo)\n {\n   string pipeSepField = (string)documentInfo.GetFieldValue(\"pipesepfield\");\n   postConversion.Trace(pipeSepField); // Prints (\" | | \")\n \n   pipeSepField = convertToSemicolonSepField(pipeSepField);\n   postConversion.Trace(pipeSepField); // Prints (\"\")\n \n   documentInfo.SetFieldValue(\"pipesepfield\", pipeSepField);\n   pipeSepField = (string)documentInfo.GetFieldValue(\"pipesepfield\");\n   postConversion.Trace(pipeSepField); // Prints (\"\")\n }\n\n</code></pre> \n<p>Despite the correct trace results however, the value of the field, pipesepfield, in my document details remains \" | | \" when I want it to be set to an empty string or removed completely (I vaguely remember that setting a field to an empty string used to result in the field being removed from the document).</p> \n<p>I've edited my cleaning function to return \"EMPTY\" instead of an empty string, and the field gets set to \"EMPTY\" as expected, so it doesn't seem to be an error in my logic.</p> \n<p>Is there something preventing me from setting fields to empty strings in PostConversion? Or removing them entirely from a document?</p>\n                </div>",
      "sitemaplastmodified" : 1457568000000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517942517000,
      "questionnumber" : 7552,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "sirfergall",
      "sitename" : "Answers",
      "sysrowid" : 5448112,
      "uri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Removing a Field from DocumentInfo during PostConversion",
    "Uri" : "http://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "PrintableUri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "ClickUri" : "https://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/7552/removing-a-field-from-documentinfo-during-postconv.html",
    "Excerpt" : "This works in all cases except the case that I am given a field value of just delimiters ( | | ), in this case the cleaning function returns an empty string (there are no values to facet on) but, w...",
    "FirstSentences" : null
  }