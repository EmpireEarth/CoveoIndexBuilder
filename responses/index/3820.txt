{
    "title" : "Inheriting from Searchbox component causes the searchbox to render twice",
    "uri" : "http://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "printableUri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "clickUri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "excerpt" : "The custom searchbox is very simple: ... Initialization.registerAutoCreateComponent(SearchboxExtended); ... As you can see, its just inheriting from the base class and adding an extra event handler.",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1292,
    "percentScore" : 80.88122,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Inheriting from Searchbox component causes the searchbox to render twice",
      "sysauthor" : "anastasiyar29",
      "sysurihash" : "yCcwtLQ3kCEeUGaj",
      "urihash" : "yCcwtLQ3kCEeUGaj",
      "numberofanswers" : 0,
      "sysuri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160370,
      "questionaskeddatestring" : "·\n            Dec 20, 2017 at 09:23 PM ·",
      "tags" : [ "sitecore", "searchbox", "inheritance" ],
      "sysconcepts" : "searchboxes ; div ; CoveoOmnibox ; CoveoSearchbox ; causing duplication ; confusing behavior ; event handler ; CoveoExtended ; registerAutoCreateComponent ; Initialization",
      "concepts" : "searchboxes ; div ; CoveoOmnibox ; CoveoSearchbox ; causing duplication ; confusing behavior ; event handler ; CoveoExtended ; registerAutoCreateComponent ; Initialization",
      "printableuri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517943489000,
      "permanentid" : "ae68e470ce888cc49de61e450bcdf047711a902e2089fb570582509783ab",
      "syslanguage" : [ "English" ],
      "transactionid" : 160370,
      "title" : "Inheriting from Searchbox component causes the searchbox to render twice",
      "date" : 1513814400000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "hasanswer" : "false",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "Simon \u2666\u2666" ],
      "hasacceptedanswer" : "false",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5449403,
      "numberofcomments" : 1,
      "size" : 67368,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911579683,
      "acceptedanswers" : 0,
      "syssize" : 67368,
      "sysdate" : 1513814400000,
      "author" : "anastasiyar29",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>\n<p>I am using Coveo for Sitecore. I have copied the div.CoveoSearchbox from SearchBoxView.cshtml into my project, and I have changed the class from \"CoveoSearchbox\" to \"CoveoSearchboxExtended\" so that I can use a custom searchbox, which inherited from Coveo.Searchbox.</p>\n<p>The custom searchbox is very simple:</p>\n<pre>import {\n    Component,\n    IComponentBindings,\n    Initialization,\n    InitializationEvents,\n    ISearchboxOptions\n    } from 'coveo-search-ui';\nimport * as $ from 'jquery';\nexport class SearchboxExtended extends Coveo.Searchbox {\n    static ID = 'SearchboxExtended';\n    constructor(public element: HTMLElement, options: ISearchboxOptions, bindings: IComponentBindings) {\n        super(element, options, bindings);\n        this.bind.onRootElement(InitializationEvents.afterComponentsInitialization, () => this.afterComponentsInitialization());\n    }\n    private afterComponentsInitialization() {\n        var $searchbox = $(this.element), $input =  $searchbox.find(\"input\");\n        if ( $input.length) {\n            var $megamenu = $(\".search-mega\"), $button = $searchbox.find(\".CoveoSearchButton\");\n            // Show Search\n            $input.on(\"focus\", function() {\n                $megamenu.addClass(\"active\");\n            });\n            $megamenu.find(\".close\").on(\"click\", function() {\n                $megamenu.removeClass(\"active\");\n            });\n        }\n    }\n}\nInitialization.registerAutoCreateComponent(SearchboxExtended);\n</pre>\n<p>As you can see, its just inheriting from the base class and adding an extra event handler.</p>\n<p>The problem is that on the front end, this results in TWO searchboxes being rendered, like this</p>\n<pre><div.CoveoExtended.CoveoSearchbox>\n    <a.CoveoSearchButton/>\n    <div.CoveoOmnibox/>\n    <a.CoveoSearchButton/>\n    <div.CoveoOmnibox/>\n</div></pre>\n<p>If I change my div class back to \"CoveoSearchbox\", or if I use composition to extend Searchbox, then the front end renders one searchbox, as expected. This is very confusing behavior, can you please shed some light on how to inherit from Searchbox without causing duplication of html?</p> \n<p>\n                </div>",
      "sitemaplastmodified" : 1513814400000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517943489000,
      "questionnumber" : 13995,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "anastasiyar29",
      "sitename" : "Answers",
      "sysrowid" : 5449403,
      "uri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Inheriting from Searchbox component causes the searchbox to render twice",
    "Uri" : "http://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "PrintableUri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "ClickUri" : "https://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/13995/inheriting-from-searchbox-component-causes-the-sea.html",
    "Excerpt" : "The custom searchbox is very simple: ... Initialization.registerAutoCreateComponent(SearchboxExtended); ... As you can see, its just inheriting from the base class and adding an extra event handler.",
    "FirstSentences" : null
  }