{
    "title" : "Linq Query Multivalue Field for Multiple Matches",
    "uri" : "http://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "printableUri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "clickUri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "excerpt" : "The facets and everything works flawless. ... However, let's say I have an item in sitecore with multiple tags and I want to find related items based on these tags in coveo index. ... I was trying ...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1262,
    "percentScore" : 79.93668,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Linq Query Multivalue Field for Multiple Matches",
      "sysauthor" : "Alexander Kay",
      "sysurihash" : "ycd00CvOl9eð9AMl",
      "urihash" : "ycd00CvOl9eð9AMl",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160370,
      "questionaskeddatestring" : "·\n            Nov 12, 2017 at 11:19 PM ·",
      "tags" : [ "coveoforsitecore", "sitecore", "linq", "coveocloud", "multivalue" ],
      "sysconcepts" : "search view ; multivalue field ; related items ; multiple tags ; coveo ; query ; LINQ ; rest endpoint ; javascript",
      "concepts" : "search view ; multivalue field ; related items ; multiple tags ; coveo ; query ; LINQ ; rest endpoint ; javascript",
      "printableuri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517943432000,
      "permanentid" : "d26833b2335ace826d07428e07d5c117783d7e2810f64bb14642f2365532",
      "syslanguage" : [ "English" ],
      "transactionid" : 160370,
      "title" : "Linq Query Multivalue Field for Multiple Matches",
      "date" : 1510790400000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Alexander Kay" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "François Lachance-Guillemette \u2666\u2666", "Alexander Kay" ],
      "hasacceptedanswer" : "true",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5449325,
      "numberofcomments" : 2,
      "size" : 76217,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911579604,
      "acceptedanswers" : 1,
      "syssize" : 76217,
      "sysdate" : 1510790400000,
      "author" : "Alexander Kay",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>\n<p>Hey folks,</p>\n<p>I'm using Coveo 4.1 Cloud (October release) and Sitecore 8.1 (rev. 160302). I've a multivalue computed field:</p>\n<pre><fieldType fieldName=\"CommodityTags\" isSortable=\"true\" isMultiValue=\"true\" settingType=\"Coveo.Framework.Configuration.FieldConfiguration, Coveo.Framework\" /></pre>public class CommodityTagsComputedField : CommodityComputedField { #region Overrides of CommodityComputedField\n<p> \n<pre><code>     public override object GetComputedFieldValue(IEnumerable&lt;Item&gt; datasources, Database database)\n     {\n         object computedFieldValue = null;\n         var commodityItem = GetCommodityItem(datasources);\n         if (commodityItem != null)\n         {\n             var commodityItemField = (MultilistField) commodityItem.Fields[CommodityItem.TagsFieldName];\n             if (!string.IsNullOrWhiteSpace(commodityItemField?.Value))\n                 computedFieldValue = string.Join(\";\", commodityItemField.GetItems().Select(x =&gt; x.Fields[TagItem.NameFieldName].Value));\n         }\n         return computedFieldValue;\n     }\n\n\n     #endregion\n }\n</code></pre> \n<p>\n<p>The facets and everything works flawless. However, let's say I have an item in sitecore with multiple tags and I want to find related items based on these tags in coveo index. I was trying to implement it in LINQ query but I stuck. I'm looking for something like this, but for multivalue field:</p>\n<pre>var results = new List<SearchResultItem>();\n            using (var context = CoveoExtensions.GetCoveoIndex().CreateSearchContext())\n            {\n                var queryable = context.GetQueryable<SearchResultItem>()\n                    .Where(x => x.TemplateId == BlogPostPageTemplateId ||\n                                x.TemplateId == ResourcePageTemplateId)\n                    .OrderByDescending(x => x.GetDateFieldValue(\"commoditypublishdate\"))\n                    .Take(maximumItems);\n                results = queryable.ToList();\n            }\n            return results;\n</pre>\n<p>Does anybody have idea how I can achieve that with LINQ?</p>\n<p>Thanks a lot,</p>\n<p>Alexander.</p> \n<p>\n                </div>",
      "sitemaplastmodified" : 1510790400000,
      "collection" : "default",
      "questionbodytext" : "public class CommodityTagsComputedField : CommodityComputedField { #region Overrides of CommodityComputedField",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517943432000,
      "questionnumber" : 13438,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "Alexander Kay",
      "sitename" : "Answers",
      "sysrowid" : 5449325,
      "uri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Linq Query Multivalue Field for Multiple Matches",
    "Uri" : "http://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "PrintableUri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "ClickUri" : "https://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/13438/linq-query-multivalue-field-for-multiple-matches.html",
    "Excerpt" : "The facets and everything works flawless. ... However, let's say I have an item in sitecore with multiple tags and I want to find related items based on these tags in coveo index. ... I was trying ...",
    "FirstSentences" : null
  }