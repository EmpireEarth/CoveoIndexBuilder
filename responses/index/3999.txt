{
    "title" : "Salesforce - MALFORMED_QUERY SOQL",
    "uri" : "http://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "printableUri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "clickUri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "excerpt" : "We are using the free/express edition of CoveoV2 for Salesforce using Visualforce pages/components. ... We are currently hitting query limitations when we are filtering down our search results on T...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1232,
    "percentScore" : 78.98085,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Salesforce - MALFORMED_QUERY SOQL",
      "sysauthor" : "bciancio",
      "sysurihash" : "N8MYm0obpw042zyc",
      "urihash" : "N8MYm0obpw042zyc",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160369,
      "questionaskeddatestring" : "·\n            Sep 20, 2017 at 09:39 PM ·",
      "tags" : [ "salesforce", "coveoforsalesforce", "jsframework", "coveov2", "malformed query exception" ],
      "sysconcepts" : "salesforce ; tab ; limitations ; expressions ; filters ; Id ; soql ; searchfilter ; controller ; criteria used ; permission sets ; multiple times ; json variables ; sharing model ; first suggestion ; exclusion",
      "concepts" : "salesforce ; tab ; limitations ; expressions ; filters ; Id ; soql ; searchfilter ; controller ; criteria used ; permission sets ; multiple times ; json variables ; sharing model ; first suggestion ; exclusion",
      "printableuri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517943353000,
      "permanentid" : "31505a729244989b4be22ab9a8298da38c40d312c4bbac42a459c51e0e73",
      "syslanguage" : [ "English" ],
      "transactionid" : 160369,
      "title" : "Salesforce - MALFORMED_QUERY SOQL",
      "date" : 1506297600000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "gminero" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "bciancio", "gminero", "bciancio" ],
      "hasacceptedanswer" : "true",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5449222,
      "numberofcomments" : 1,
      "size" : 79123,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911579502,
      "acceptedanswers" : 1,
      "syssize" : 79123,
      "sysdate" : 1506297600000,
      "author" : "bciancio",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>\n<p>We are using the <strong>free/express </strong>edition of CoveoV2 for Salesforce using Visualforce pages/components.</p>\n<p><strong>Error Message:</strong> \"message\": \"Unexpected Salesforce error: Unexpected SOAP fault: MALFORMED_QUERY SOQL statements cannot be longer than 20000 characters.\"</p>\n<p><strong>Full Stacktrace: </strong><a rel=\"nofollow\" href=\"https://gist.github.com/bciancio/237b07c1b16c2e64efa030a99a211dc7\">https://gist.github.com/bciancio/237b07c1b16c2e64efa030a99a211dc7</a></p>\n<p>We are currently hitting query limitations when we are filtering down our search results on Tab \"One Object\" and moving to Tab \"All Objects\". Both tabs share the facet filter. We have narrowed down the source of our issue stemming from us including <i>rl_filter</i> in the below code.</p>\n<pre>public String searchFilter {get;set;}\n....\nsearchfilter = rl_filter + ' ' + acc_filter + ' ' + iqf_filter + ' ' + object_filter;\nSystem.debug(searchfilter);</pre>\n<pre><CoveoV2:SearchInterface name=\"Comm_SearchMain\" filter=\"{!searchFilter}\"/></pre>\n<p>Here is what <em>rl_filter</em> looks like: </p>\n<pre>@sfResource_Type__c==(\"LOA/SOW\")((NOT @sfDisplay_In_Community__c = false  AND NOT @sfVisible_to_All_Sellers__c = false) OR @sfid==(\"a0p0q0000000wvYAAQ\",\"a0p0q00000018d0AAA\",\"a0p0q0000000ya1AAA\", ...))</pre>\n<p>The System Debug for <em>searchfilter</em> in the code above results in 1,286 characters that is sent as a <a rel=\"nofollow\" href=\"https://developers.coveo.com/display/public/SalesforceV2/Send+Apex+Context+to+a+JavaScript+Search+Interface\">search filter</a>.</p>\n<p>Any suggestions as to what we should try to either help with debugging or reasons to why this might be happening would be appreciated. </p> \n<p>\n                </div>",
      "sitemaplastmodified" : 1506297600000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517943353000,
      "questionnumber" : 12854,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "bciancio",
      "sitename" : "Answers",
      "sysrowid" : 5449222,
      "uri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Salesforce - MALFORMED_QUERY SOQL",
    "Uri" : "http://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "PrintableUri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "ClickUri" : "https://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/12854/salesforce-malformed-query-soql.html",
    "Excerpt" : "We are using the free/express edition of CoveoV2 for Salesforce using Visualforce pages/components. ... We are currently hitting query limitations when we are filtering down our search results on T...",
    "FirstSentences" : null
  }