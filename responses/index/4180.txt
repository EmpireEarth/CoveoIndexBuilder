{
    "title" : "Content Delivary: Remote certificate is invalid according to the validation procedure",
    "uri" : "http://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "printableUri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "clickUri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "excerpt" : "We've just upgraded from Coveo for Sitecore 3.0 to 4.0 (450) on prem edition. ... I've setup CES with Admin security and the CMS is able to successfully index and query data. ... After upgrading th...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1198,
    "percentScore" : 77.88339,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Content Delivary: Remote certificate is invalid according to the validation procedure",
      "sysauthor" : "aga",
      "sysurihash" : "v1x4eo8qHXkWa66I",
      "urihash" : "v1x4eo8qHXkWa66I",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160366,
      "questionaskeddatestring" : "·\n            Jun 23, 2017 at 11:25 PM ·",
      "tags" : [ "upgrade" ],
      "sysconcepts" : "coveo ; Sitecore ; queries ; YSOD ; Admin ; servers ; cert ; IIS ; config file ; stack trace ; validation procedure ; Remote certificate ; prem edition ; SearchProvider ; cdserver ; hostname",
      "concepts" : "coveo ; Sitecore ; queries ; YSOD ; Admin ; servers ; cert ; IIS ; config file ; stack trace ; validation procedure ; Remote certificate ; prem edition ; SearchProvider ; cdserver ; hostname",
      "printableuri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517943218000,
      "permanentid" : "5e7d1e1e77389b99be35d1e3e12d8502724eb994c750e7bd34cf7ab4cc90",
      "syslanguage" : [ "English" ],
      "transactionid" : 160366,
      "title" : "Content Delivary: Remote certificate is invalid according to the validation procedure",
      "date" : 1498521600000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Simon" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "François Lachance-Guillemette \u2666\u2666", "aga", "François Lachance-Guillemette \u2666\u2666" ],
      "hasacceptedanswer" : "false",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5449041,
      "numberofcomments" : 1,
      "size" : 78836,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911579321,
      "acceptedanswers" : 0,
      "syssize" : 78836,
      "sysdate" : 1498521600000,
      "author" : "aga",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>\n<p>Hi</p>\n<p>We've just upgraded from Coveo for Sitecore 3.0 to 4.0 (450) on prem edition. I've setup CES with Admin security and the CMS is able to successfully index and query data. After upgrading the CD im getting a YSOD \"Remote certificate is invalid according to the validation procedure\". On the CD I can successfully hit <strong>/coveo/rest</strong> but it appears that the YSOD is being caused when we query coveo from linq. </p>\n<p>Couple other things worth mentioning:</p>\n<ul> \n <li>Copied the certs and encryption keys to CD</li>\n <li>Created Z.SwitchMasterToWeb folder and enabled SwitchMasterToWeb and SwitchMasterToWeb.Coveo</li>\n <li>Added skipSitecoreCredentialsUpdate skipSitecoreLoginCheck to the SearchProvider.Custom</li>\n <li>Admin service url is using the same hostname as the cert. Also this config is working on CMS</li>\n <li>Diagnostics tool on CMS is all green </li>\n</ul>\n<p>Here is the stack trace:</p>\n<pre>HttpClientException: Failed to obtain resource located at 'https://{cd}:4443/coveo/rest?indexName=Coveo_web_index'. See inner exception for details.]\n   Coveo.Framework.Utils.Rest.HttpClient.HandleResponseException(WebException p_Exception, String p_Url, Int64 p_CallId) +492 </pre>\n<pre> Coveo.Framework.Utils.Rest.HttpClient.ExecuteRequest(String p_Url, Func`2 p_CreateRequest, Int64 p_CallId) +828\n   Coveo.Framework.Utils.Rest.HttpClient.Post(String p_Url, String p_Body) +314 </pre>\n<pre>Coveo.SearchServiceProvider.Rest.ClientSessionWrapper.ExecuteQuery(QueryParams p_QueryParams) +415\n   Coveo.SearchProvider.LinqToCoveoIndex`1.ExecuteQuery(QueryParams p_Query, IEnumerable`1 p_QueriedTypes) +920 </pre>\n<pre>Coveo.SearchProvider.LinqToCoveoIndex`1.Execute(CoveoCompositeQuery p_Query) +554\n   System.Linq.Queryable.FirstOrDefault(IQueryable`1 source) +330</pre>\n<p>Current Coveo for Sitecore version: 4.0.450.0 </p>\n<p>Current Sitecore version: 8.0.150621 </p>\n<p>CES: 7.0 x64 Build 8541.0</p>\n<p>Thanks</p> \n<p>\n<p>\n                </div>",
      "sitemaplastmodified" : 1498521600000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517943218000,
      "questionnumber" : 11904,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "aga",
      "sitename" : "Answers",
      "sysrowid" : 5449041,
      "uri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Content Delivary: Remote certificate is invalid according to the validation procedure",
    "Uri" : "http://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "PrintableUri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "ClickUri" : "https://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/11904/content-delivary-remote-certificate-is-invalid-acc.html",
    "Excerpt" : "We've just upgraded from Coveo for Sitecore 3.0 to 4.0 (450) on prem edition. ... I've setup CES with Admin security and the CMS is able to successfully index and query data. ... After upgrading th...",
    "FirstSentences" : null
  }