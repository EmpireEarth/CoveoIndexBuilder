{
    "title" : "Diagnostic Page: \"The admin is not connected to the service.\"",
    "uri" : "http://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "printableUri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "clickUri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "excerpt" : "This morning our Coveo server went offline and had to be restored by IT. ... They restore a virtual machine backup from the previous night. ... When the server came back Coveo search still was not ...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1198,
    "percentScore" : 77.88339,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Diagnostic Page: \"The admin is not connected to the service.\"",
      "sysauthor" : "Paul Aldrich",
      "sysurihash" : "WB8bNE2tZ7MARFCA",
      "urihash" : "WB8bNE2tZ7MARFCA",
      "numberofanswers" : 1,
      "sysuri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 160366,
      "questionaskeddatestring" : "·\n            Jun 19, 2017 at 08:48 PM ·",
      "tags" : [ "adminservice" ],
      "sysconcepts" : "server ; Coveo Enterprise ; security ; CES7 folder ; config ; indexes ; bak ; certificates ; Setup screen ; Sitecore logs ; stack trace ; reinstalling",
      "concepts" : "server ; Coveo Enterprise ; security ; CES7 folder ; config ; indexes ; bak ; certificates ; Setup screen ; Sitecore logs ; stack trace ; reinstalling",
      "printableuri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1517943211000,
      "permanentid" : "7499778b72d3af53302106e7c938d9991076003eca7ad5e3dc818b7f4873",
      "syslanguage" : [ "English" ],
      "transactionid" : 160366,
      "title" : "Diagnostic Page: \"The admin is not connected to the service.\"",
      "date" : 1497916800000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "answerauthor" : [ "Paul Aldrich" ],
      "hasanswer" : "true",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "Dominic Berube \u2666\u2666", "Paul Aldrich" ],
      "hasacceptedanswer" : "true",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5449033,
      "numberofcomments" : 1,
      "size" : 77013,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384744911579313,
      "acceptedanswers" : 1,
      "syssize" : 77013,
      "sysdate" : 1497916800000,
      "author" : "Paul Aldrich",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>\n<p>Hello,</p>\n<p>This morning our Coveo server went offline and had to be restored by IT. They restore a virtual machine backup from the previous night. When the server came back Coveo search still was not working. In the diagnostic page, we are only seeing one error shown for both Coveo Enterprise Search and Coveo Security Provider (although they have a different stack trace). Below is the stack trace for the Coveo Enterprise Search: </p>\n<p><code>System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: The admin <br></code></p>\n<p><code>is not connected to the service. (Fault Detail is equal to An ExceptionDetail, likely<br></code></p>\n<p><code> created by IncludeExceptionDetailInFaults=true, whose value is: <br></code></p>\n<p><code>System.Runtime.InteropServices.COMException: The admin is not connected to the service. <br></code></p>\n<p><code> at Coveo.CES.Interops.CESAdmin.AdminClass.get_PhysicalIndex() <br></code></p>\n<p><code>at Coveo.CES.AdminService.CesInformation.CesAdminWrapper.get_PhysicalIndex() <br></code></p>\n<p><code>at Coveo.CES.AdminService.AdminService.GetCollectionNames(CesMasterInformation p_Info) <br></code></p>\n<p><code>at SyncInvokeGetCollectionNames(Object , Object[] , Object[] ) <br></code></p>\n<p><code>at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs) <br></code></p>\n<p><code>at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) <br></code></p>\n<p><code>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) <br></code></p>\n<p><code>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) <br></code></p>\n<p><code>at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)).</code> </p>\n<p>The admin service reports the same error. In the Sitecore logs, we see errors such as</p>\n<pre>Exception: Coveo.Framework.Utils.Rest.HttpClientException<br>Message: Failed to obtain resource located at 'http://www.subzero-wolf.com/coveo/rest?indexName=Coveo_pub_index'.<br>[BEGIN RESPONSE BODY]{\"statusCode\":408,\"message\":\"Server is unavailable: (not specified,null)\",\"type\":\"ServerUnavailableException\" (full exception details attached <a href=\"/storage/attachments/154-coveo-exception.txt\">coveo-exception.txt</a>).</pre>\n<p>All services are running. When I try to access the admin panel I get the Initial Setup screen, which is strange since we already have indexes set up. Additionally I checked the following:</p>\n<ul> \n <li>Secret key in config.yml matches the key in our custom rest config</li>\n <li>Certificate paths in config.yml are correct and certificates exist there</li>\n</ul>\n<p>We are using Coveo Enterprise Search 7.0 x64 Build 8691.0, Coveo Search API 8 FIleVersion 8.0.1130.0 and Coveo for Sitecore version 4.0.895.0.</p>\n<p>Thanks,</p>\n<p>Paul</p> \n<p>\n                </div>",
      "sitemaplastmodified" : 1497916800000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1517943211000,
      "questionnumber" : 11859,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "Paul Aldrich",
      "sitename" : "Answers",
      "sysrowid" : 5449033,
      "uri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Diagnostic Page: \"The admin is not connected to the service.\"",
    "Uri" : "http://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "PrintableUri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "ClickUri" : "https://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/11859/diagnostic-page-the-admin-is-not-connected-to-the.html",
    "Excerpt" : "This morning our Coveo server went offline and had to be restored by IT. ... They restore a virtual machine backup from the previous night. ... When the server came back Coveo search still was not ...",
    "FirstSentences" : null
  }