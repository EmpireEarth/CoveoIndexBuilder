{
    "title" : "Media documents with authoring site url",
    "uri" : "http://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "printableUri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "clickUri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "uniqueId" : "42.4247$http://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "excerpt" : "Media documents with authoring site url ... I've upgraded an installation from coveo 3 to 4 as part of a Sitecore upgrade project (1 CM , 4 CDs) and noticed that after indexing, document fields wit...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1427,
    "percentScore" : 85.00186,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Media documents with authoring site url",
      "sysauthor" : "Pedro",
      "sysurihash" : "Zx6xyvyyO5kYGwQd",
      "urihash" : "Zx6xyvyyO5kYGwQd",
      "numberofanswers" : 0,
      "sysuri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
      "sysprintableuri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
      "sitemappriority" : 0.1,
      "systransactionid" : 161066,
      "questionaskeddatestring" : "·\n            6 days ago ·",
      "tags" : [ "indexing", "upgrade" ],
      "sysconcepts" : "media items ; indexing ; sitecore ; coveo ; documentation ; upgrade ; authoring ; serverUrls ; troubleshooting ; parallel question ; tree structure ; defaultIndexConfiguration",
      "concepts" : "media items ; indexing ; sitecore ; coveo ; documentation ; upgrade ; authoring ; serverUrls ; troubleshooting ; parallel question ; tree structure ; defaultIndexConfiguration",
      "printableuri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
      "documenttype" : "WebPage",
      "sysindexeddate" : 1518152891000,
      "permanentid" : "c54b29d48a393875069c0afbfc14bd414a14a371b23a4fdc55be46a4782d",
      "syslanguage" : [ "English" ],
      "transactionid" : 161066,
      "title" : "Media documents with authoring site url",
      "date" : 1517875200000,
      "objecttype" : "Answers",
      "sitemapchangefrequency" : "Monthly",
      "hasanswer" : "false",
      "audience" : [ "Administrator", "Developer" ],
      "commentauthor" : [ "François Lachance-Guillemette \u2666\u2666", "Pedro", "François Lachance-Guillemette \u2666\u2666", "Pedro", "François Lachance-Guillemette \u2666\u2666", "Pedro" ],
      "hasacceptedanswer" : "false",
      "sourcetype" : "Sitemap",
      "sysconnectortype" : "SitemapCrawler",
      "rowid" : 5488469,
      "numberofcomments" : 3,
      "size" : 80076,
      "sysdocumenttype" : "WebPage",
      "questionvotes" : 0,
      "clickableuri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
      "syssource" : "AnswersCloud",
      "orderingid" : 212384955617433573,
      "acceptedanswers" : 0,
      "syssize" : 80076,
      "sysdate" : 1517875200000,
      "author" : "Pedro",
      "source" : "AnswersCloud",
      "questionbodyhtml" : "<div class=\"question-body\">\n                <p>\n<p>I've upgraded an installation from coveo 3 to 4 as part of a Sitecore upgrade project (1 CM , 4 CDs) and noticed that after indexing, document fields with media urls all have the authoring website urls on the pub index. </p>\n<p>As a result when quering for displaying the media items, the query is successful but the link isn't correct. </p>\n<p>To note that other content links are all correct on all indexes including pub. It is only the media links that are not. </p>\n<p>This seems to be a common problem when setting up scalable setups so I've found a few links and documentation about it (below). However I haven't found the cause for the media items to be incorrect and not the content items. Is there something you'd recommend me looking at for troubleshooting? I'm thinking maybe something around the LinkManager, indexes or serverUrls setup that's specific to media. </p>\n<p>The affected index config:</p>\n<pre><index id=\"Coveo_production_index\" type=\"Coveo.SearchProvider.ProviderIndex, Coveo.SearchProvider\" patch:source=\"Coveo.SearchProvider.Custom.config\">\n  <param desc=\"p_Name\">$(id)</param>\n  <configuration ref=\"coveo/defaultIndexConfiguration\"/>\n  <locations hint=\"list:AddCrawler\">\n    <crawler name=\"ContentCrawler\" type=\"Sitecore.ContentSearch.SitecoreItemCrawler, Sitecore.ContentSearch\">\n      <database>production</database>\n      <root>/sitecore/content</root>\n      <stopOnError>true</stopOnError>\n    </crawler>\n    <crawler name=\"MediaLibraryCrawler\" type=\"Sitecore.ContentSearch.SitecoreItemCrawler, Sitecore.ContentSearch\">\n      <database>production</database>\n      <root>/sitecore/media library/Files/</root>\n      <stopOnError>true</stopOnError>\n    </crawler>\n  </locations>\n  <strategies hint=\"list:AddStrategy\">\n    <strategy type=\"Sitecore.ContentSearch.Maintenance.Strategies.OnPublishEndAsynchronousStrategy, Sitecore.ContentSearch\">\n      <param desc=\"database\">production</param>\n      <CheckForThreshold>true</CheckForThreshold>\n    </strategy>\n  </strategies>\n  <propertyStore ref=\"contentSearch/indexConfigurations/databasePropertyStore\" param1=\"$(id)\"/>\n  <enableItemLanguageFallback>false</enableItemLanguageFallback>\n  <enableFieldLanguageFallback>false</enableFieldLanguageFallback>\n</index>\n</pre> \n<p>\n                </div>",
      "sitemaplastmodified" : 1517875200000,
      "collection" : "default",
      "syssourcetype" : "Sitemap",
      "indexeddate" : 1518152891000,
      "questionnumber" : 14454,
      "connectortype" : "SitemapCrawler",
      "filetype" : "html",
      "sysclickableuri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
      "sysfiletype" : "html",
      "language" : [ "English" ],
      "sitemapparenturl" : "http://answers.coveo.com/questions/1.xml",
      "questionauthor" : "Pedro",
      "sitename" : "Answers",
      "sysrowid" : 5488469,
      "uri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
      "syscollection" : "default",
      "sitelanguage" : [ "English" ]
    },
    "Title" : "Media documents with authoring site url",
    "Uri" : "http://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "PrintableUri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "ClickUri" : "https://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "UniqueId" : "42.4247$http://answers.coveo.com/questions/14454/media-documents-with-authoring-site-url.html",
    "Excerpt" : "Media documents with authoring site url ... I've upgraded an installation from coveo 3 to 4 as part of a Sitecore upgrade project (1 CM , 4 CDs) and noticed that after indexing, document fields wit...",
    "FirstSentences" : null
  }