{
    "title" : "clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site",
    "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
    "printableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
    "clickUri" : "https://na61.salesforce.com/kA13200000005Lu",
    "uniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
    "excerpt" : "When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on c...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1296,
    "percentScore" : 81.00633,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site",
      "sysurihash" : "2tCq9ECemiQFBfyn",
      "urihash" : "2tCq9ECemiQFBfyn",
      "parents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site\" uri=\"https://na61.salesforce.com/kA13200000005Lu\" /></parents>",
      "sfdcarticletype" : "Product Issue",
      "sfresolutionc" : "A fix in for this Sitecore bug will be implemented in Coveo for Sitecore 2016 release.<br><br>In addition, here&#39;s a workaround to circumvent this bug:\n<ol><li>Build the provided code in the Processor Section bellow. You will need to reference his Coveo.Framework dll and his Sitecore.Kernel dll.</li><li>Place the compiled code in the bin folder of your Sitecore instance.</li><li>Edit the Coveo.SearchProvider.Rest.config file by replacing the ResolveResultClickableUriProcessor by the one in the Configuration section bellow.</li><li>In your <span style=\"\">Coveo.SearchProvider.Rest.config, a</span>djust the parameter p_UrlUtilities of the processor, to match the type and dll he compiled.</li></ol>\n<br><b>Configuration</b>\n\n<pre class=\"ckeditor_codeblock\">\n&lt;processor type=&quot;Coveo.SearchProvider.Rest.Processors.CoveoProcessParsedRestResponse.ResolveResultClickableUriProcessor, Coveo.SearchProvider.Rest&quot; &gt;\n    &lt;param name=&quot;p_UrlUtilities&quot; type=&quot;Coveo.Support.SupportUrlUtilities.SupportUrlUtilities, Coveo.Support.UrlUtilities&quot; /&gt;\n    &lt;param name=&quot;p_SitecoreHelper&quot; type=&quot;Coveo.UI.Helpers.SitecoreHelper, Coveo.UIBase&quot; /&gt;\n    &lt;param name=&quot;p_DatabaseFactory&quot; type=&quot;Coveo.Framework.Databases.DatabaseFactory, Coveo.Framework&quot; /&gt;\n    &lt;param name=&quot;p_ItemUriFactory&quot; type=&quot;Coveo.Framework.Items.ItemUriFactory, Coveo.Framework&quot; /&gt;\n&lt;/processor&gt;</pre>\n<br><br><br><b>Processor</b>\n\n<pre class=\"ckeditor_codeblock\">\nusing Coveo.Framework.Items;\nusing Coveo.Framework.Links;\nusing Coveo.Framework.Utils;\nusing Sitecore.Sites;\n\nnamespace Coveo.Support.SupportUrlUtilities\n{\n    public class SupportUrlUtilities : IUrlUtilities\n    {\n        private UrlUtilities m_UrlUtilities;\n\n        public SupportUrlUtilities()\n        {\n            m_UrlUtilities = new UrlUtilities();\n        }\n\n        public string GetItemUrl(IItem p_Item, IUrlOptions p_UrlOptions)\n        {\n            // Fix : inject the item&#39;s language into the url options.\n            if (p_Item.Language != null) {\n                p_UrlOptions.Language = p_Item.Language;\n            }\n            return m_UrlUtilities.GetItemUrl(p_Item, p_UrlOptions);\n        }\n\n        public IUrlOptions GetDefaultUrlOptions()\n        {\n            return m_UrlUtilities.GetDefaultUrlOptions();\n        }\n\n        public string GetInstanceName()\n        {\n            return m_UrlUtilities.GetInstanceName();\n        }\n\n        public string GetMediaUrl(IItem p_Item)\n        {\n            return m_UrlUtilities.GetMediaUrl(p_Item);\n        }\n\n        public string GetMediaUrl(IItem p_Item, int p_Width, int p_Height)\n        {\n            return m_UrlUtilities.GetMediaUrl(p_Item, p_Width, p_Height);\n        }\n\n        public string GetServerUrl()\n        {\n            return m_UrlUtilities.GetServerUrl();\n        }\n\n        public SiteContext GetSite(string p_SiteName)\n        {\n            return m_UrlUtilities.GetSite(p_SiteName);\n        }\n\n        public bool IsAbsoluteUrl(string p_Url)\n        {\n            return m_UrlUtilities.IsAbsoluteUrl(p_Url);\n        }\n    }\n}</pre>\n<br> ",
      "sysuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
      "sysprintableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
      "sflastpublisheddate" : 1464641380000,
      "systransactionid" : 161138,
      "sfversionc" : "3.0",
      "sfurlname" : "clickUri-not-being-compiled-correctly-when-using-ResolveResultClickableUriProcessor-in-multi-language-site",
      "sfsystemmodstamp" : 1513943071000,
      "sfisvisibleinapp" : "true",
      "sysconcepts" : "LinkBuilder takes Sitecore ; language ; Coveo ; clickUri ; bug ; config ; SearchProvider ; bin folder ; ResolveResultClickableUriProcessor ; Globalization",
      "sfkbversionnumber" : "2",
      "concepts" : "LinkBuilder takes Sitecore ; language ; Coveo ; clickUri ; bug ; config ; SearchProvider ; bin folder ; ResolveResultClickableUriProcessor ; Globalization",
      "printableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
      "documenttype" : "article",
      "sfkbarticlekavid" : "ka1320000008W7cAAE",
      "sysindexeddate" : 1518187531000,
      "sfknowledgearticleid" : "kA13200000005LuCAI",
      "sfcreatedbyid" : "00560000003q7JgAAI",
      "sfconnectorc" : "N/A",
      "permanentid" : "0621b320481a38a2432bbb7de29f938b5be860e63ce8125bf9547d3b61f6",
      "syslanguage" : [ "English" ],
      "transactionid" : 161138,
      "sfisvisibleinprm" : "true",
      "title" : "clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site",
      "sfversionnumber" : 2,
      "sfarticlenumber" : "000001106",
      "date" : 1513943071000,
      "objecttype" : "KB Article",
      "allmetadatavalues" : "{\"kav_lastmodifiedby.attribute.type\": [\"User\"], \"coveo_short_id\": [\"kA13200000005Lu\"], \"sflastmodifiedbyname\": [\"Frederic Cote\"], \"kav_coveo_version__c__html_stripped\": [\"\"], \"fileextension\": [\"\"], \"sfdcexpandedproduct\": [\"All;All|Sitecore\"], \"kav_createdby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000003q7JgAAI\"], \"sflanguage\": [\"en_US\"], \"kav_createdby.attribute.type\": [\"User\"], \"kav_createdby.id\": [\"00560000003q7JgAAI\"], \"kav_language\": [\"en_US\"], \"sfsitecoreversionc\": [\"8.0;8.1;N/A\"], \"sourcetype\": [\"Salesforce\"], \"title\": [\"clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site\"], \"source\": [\"Salesforce Public Items\"], \"kav_owner.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000003q7JgAAI\"], \"parents\": [\"<?xml version=\\\"1.0\\\" encoding=\\\"utf-16\\\"?><parents><parent name=\\\"Organization\\\" uri=\\\"https://na61.salesforce.com/home/home.jsp\\\" /><parent name=\\\"KB_Article__ka\\\" uri=\\\"http://www.salesforce.com/org:organization/articletype:KB_Article\\\" /><parent name=\\\"clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site\\\" uri=\\\"https://na61.salesforce.com/kA13200000005Lu\\\" /></parents>\"], \"sfisvisibleinprm\": [true], \"kav_title\": [\"clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site\"], \"kav_isvisibleincsp\": [true], \"hashtmlversion\": [true], \"sfarticletypec\": [\"Product Issue\"], \"kav_version__c\": [\"3.0\"], \"kav_versionnumber\": [2], \"sfcreatedbyname\": [\"Frederic Cote\"], \"sflastpublisheddate\": [1464641380], \"objecttypelabel\": [\"KB Article\"], \"kav_cause__c__html_stripped\": [\"This behavior is caused by a bug in Sitecore.\\u00a0 \\n \\n Indeed, the LinkBuilder takes Sitecore.Globalization.Language.Current instead of the language on the item. In other words, Sitecore does not take into account the language of the item.\"], \"originalhtmlcharset\": [1200], \"coveo_connector_hasbinarydata\": [false], \"kav_lastpublisheddate\": [1464641380], \"sfsystemmodstamp\": [1513943071], \"ka_attribute.type\": [\"KB_Article__ka\"], \"sfdcproduct\": [\"Sitecore\"], \"clickableuri\": [\"https://na61.salesforce.com/kA13200000005Lu\"], \"kav_dc_expanded_product\": [\"All;All|Sitecore\"], \"sftitle\": [\"clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site\"], \"kav_owner.id\": [\"00560000003q7JgAAI\"], \"sfbuildc\": [\"All\"], \"sfisvisibleinapp\": [true], \"ka_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__ka/kA13200000005LuCAI\"], \"sfdcarticletype\": [\"Product Issue\"], \"kav_cause__c\": [\"This behavior is caused by a bug in Sitecore.\\u00a0<br><br>Indeed, the LinkBuilder takes Sitecore.Globalization.Language.Current instead of the language on the item. In other words, Sitecore does not take into account the language of the item.\"], \"sfislatestversion\": [true], \"sfcausec\": [\"This behavior is caused by a bug in Sitecore.\\u00a0<br><br>Indeed, the LinkBuilder takes Sitecore.Globalization.Language.Current instead of the language on the item. In other words, Sitecore does not take into account the language of the item.\"], \"contenttype\": [\"binarydata\"], \"sfurlname\": [\"clickUri-not-being-compiled-correctly-when-using-ResolveResultClickableUriProcessor-in-multi-language-site\"], \"ka_id\": [\"kA13200000005LuCAI\"], \"kav_datacategoryselections.datacategoryname\": [\"Product_Issue;Sitecore\"], \"coveo_url\": [\"https://na61.salesforce.com/kA13200000005Lu\"], \"kav_urlname\": [\"clickUri-not-being-compiled-correctly-when-using-ResolveResultClickableUriProcessor-in-multi-language-site\"], \"kav_articletype\": [\"KB_Article__kav\"], \"foldingcollection\": [\"0a6c821bfad8e1ba948b7ddb5c85ecd36810ded8c07a903d515ed94b6beb\"], \"body\": [\"<html>   <body>     <div style=\\\"background-color: #fff;border: 2px solid #BBC5CC;border-radius: 4px;float: left;font-family: lato;margin-left: 15px;margin-right: 15px;margin-bottom: 4%;padding: 10px;width: 60%;\\\">       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Description         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> <b>Note</b><br>This article assumes that:<br>- You&#39;re NOT using a multi-site implementation in your Sitecore<br>- You&#39;ve configured your site in Sitecore such as<br>&lt;site name=&quot;mySite&quot; virtualFolder=&quot;/&quot; physicalFolder=&quot;/&quot; hostName=&quot;*mySite*&quot; targetHostName=&quot;mySite&quot;<br>- You&#39;ve enabled the\\u00a0ResolveResultClickableUriProcessor processor (more <a href=\\\"https://developers.coveo.com/display/SitecoreV3/Using+the+Sitecore+LinkManager+to+Resolve+URIs+in+a+Coveo+Search+Page\\\" target=\\\"_blank\\\">here</a>)<br><br>When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on clikUri <a href=\\\"https://developers.coveo.com/display/SearchREST/Query+Results\\\" target=\\\"_blank\\\">here</a>).<br><br>For example, let,s say you have a site with en and fr language. In your search result for fr items, you would have this clickUri:<br><br><span style=\\\"\\\">clickUri: en/myItem</span></div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Environment         </div>       </div>       <br/>       <table>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Product</td>           <td>Sitecore</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Sitecore Version</td>           <td>8.0;8.1;N/A</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Connector</td>           <td>N/A</td>         </tr>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Published</td>           <td>1464641380</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Version</td>           <td>3.0</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Build</td>           <td>All</td>         </tr>       </table>       <br/>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Cause         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> This behavior is caused by a bug in Sitecore.\\u00a0<br><br>Indeed, the LinkBuilder takes Sitecore.Globalization.Language.Current instead of the language on the item. In other words, Sitecore does not take into account the language of the item.</div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Resolution         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> A fix in for this Sitecore bug will be implemented in Coveo for Sitecore 2016 release.<br><br>In addition, here&#39;s a workaround to circumvent this bug:\\n<ol><li>Build the provided code in the Processor Section bellow. You\\u00a0will need to reference his Coveo.Framework dll and his Sitecore.Kernel dll.</li><li>Place the compiled code in the bin folder of your Sitecore\\u00a0instance.</li><li>Edit the Coveo.SearchProvider.Rest.config file by replacing the ResolveResultClickableUriProcessor by the one in the Configuration section bellow.</li><li>In your <span style=\\\"\\\">Coveo.SearchProvider.Rest.config, a</span>djust the parameter p_UrlUtilities of the processor, to match the type and dll he compiled.</li></ol>\\n<br><b>Configuration</b>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;processor type=&quot;Coveo.SearchProvider.Rest.Processors.CoveoProcessParsedRestResponse.ResolveResultClickableUriProcessor, Coveo.SearchProvider.Rest&quot; &gt;\\n    &lt;param name=&quot;p_UrlUtilities&quot; type=&quot;Coveo.Support.SupportUrlUtilities.SupportUrlUtilities, Coveo.Support.UrlUtilities&quot; /&gt;\\n    &lt;param name=&quot;p_SitecoreHelper&quot; type=&quot;Coveo.UI.Helpers.SitecoreHelper, Coveo.UIBase&quot; /&gt;\\n    &lt;param name=&quot;p_DatabaseFactory&quot; type=&quot;Coveo.Framework.Databases.DatabaseFactory, Coveo.Framework&quot; /&gt;\\n    &lt;param name=&quot;p_ItemUriFactory&quot; type=&quot;Coveo.Framework.Items.ItemUriFactory, Coveo.Framework&quot; /&gt;\\n&lt;/processor&gt;</pre>\\n<br><br><br><b>Processor</b>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nusing Coveo.Framework.Items;\\nusing Coveo.Framework.Links;\\nusing Coveo.Framework.Utils;\\nusing Sitecore.Sites;\\n\\nnamespace Coveo.Support.SupportUrlUtilities\\n{\\n    public class SupportUrlUtilities : IUrlUtilities\\n    {\\n        private UrlUtilities m_UrlUtilities;\\n\\n        public SupportUrlUtilities()\\n        {\\n            m_UrlUtilities = new UrlUtilities();\\n        }\\n\\n        public string GetItemUrl(IItem p_Item, IUrlOptions p_UrlOptions)\\n        {\\n            // Fix : inject the item&#39;s language into the url options.\\n            if (p_Item.Language != null) {\\n                p_UrlOptions.Language = p_Item.Language;\\n            }\\n            return m_UrlUtilities.GetItemUrl(p_Item, p_UrlOptions);\\n        }\\n\\n        public IUrlOptions GetDefaultUrlOptions()\\n        {\\n            return m_UrlUtilities.GetDefaultUrlOptions();\\n        }\\n\\n        public string GetInstanceName()\\n        {\\n            return m_UrlUtilities.GetInstanceName();\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item);\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item, int p_Width, int p_Height)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item, p_Width, p_Height);\\n        }\\n\\n        public string GetServerUrl()\\n        {\\n            return m_UrlUtilities.GetServerUrl();\\n        }\\n\\n        public SiteContext GetSite(string p_SiteName)\\n        {\\n            return m_UrlUtilities.GetSite(p_SiteName);\\n        }\\n\\n        public bool IsAbsoluteUrl(string p_Url)\\n        {\\n            return m_UrlUtilities.IsAbsoluteUrl(p_Url);\\n        }\\n    }\\n}</pre>\\n<br>\\u00a0</div>     </div>   </body> </html>\"], \"kav_product__c\": [\"Sitecore\"], \"kav_article_type__c\": [\"Product Issue\"], \"sfpublishstatus\": [\"Online\"], \"sfcreatedbyid\": [\"00560000003q7JgAAI\"], \"kav_description__c__html_stripped\": [\"Note \\n This article assumes that: \\n - You're NOT using a multi-site implementation in your Sitecore \\n - You've configured your site in Sitecore such as \\n <site name=\\\"mySite\\\" virtualFolder=\\\"/\\\" physicalFolder=\\\"/\\\" hostName=\\\"*mySite*\\\" targetHostName=\\\"mySite\\\" \\n - You've enabled the\\u00a0ResolveResultClickableUriProcessor processor (more  here ) \\n \\n When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on clikUri  here ). \\n \\n For example, let,s say you have a site with en and fr language. In your search result for fr items, you would have this clickUri: \\n \\n clickUri: en/myItem\"], \"kav_islatestversion\": [true], \"kav_knowledgearticleid\": [\"kA13200000005LuCAI\"], \"sfknowledgearticleid\": [\"kA13200000005LuCAI\"], \"sfownername\": [\"Frederic Cote\"], \"kav_datacategoryselections.attribute.type\": [\"KB_Article__DataCategorySelection;KB_Article__DataCategorySelection\"], \"detectedtitle\": [\"- You're NOT using a multi-site implementation in your Sitecore\"], \"kav_createddate\": [1464641368], \"kav_build__c\": [\"All\"], \"language\": [\"English\"], \"coveo_foldingchild\": [\"5ed537ce882aa29a74aa9fd972fd0da0fce1900b90802e5db6324f81cf46\"], \"sfownerid\": [\"00560000003q7JgAAI\"], \"kav_createdby.coveo_record_size\": [2], \"kav_systemmodstamp\": [1513943071], \"objecttype\": [\"KB Article\"], \"connectortype\": [\"Salesforce2\"], \"kav_coveo_record_size\": [4], \"originaluri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US\"], \"sfisvisibleincsp\": [true], \"convertertype\": [\"TYPE_HTML\"], \"filetype\": [\"SalesforceItem\"], \"kav_owner.name\": [\"Frederic Cote\"], \"sfdcexpandedarticletype\": [\"All;All|Product Issue\"], \"objecttypelabelplural\": [\"KB Articles\"], \"sfcurrencyisocode\": [\"CAD\"], \"sfisdeleted\": [false], \"extractedsize\": [7104], \"size\": [10785], \"kav_publishstatus\": [\"Online\"], \"kav_connector__c\": [\"N/A\"], \"generateexcerpt\": [true], \"sfdescriptionc\": [\"<b>Note</b><br>This article assumes that:<br>- You&#39;re NOT using a multi-site implementation in your Sitecore<br>- You&#39;ve configured your site in Sitecore such as<br>&lt;site name=&quot;mySite&quot; virtualFolder=&quot;/&quot; physicalFolder=&quot;/&quot; hostName=&quot;*mySite*&quot; targetHostName=&quot;mySite&quot;<br>- You&#39;ve enabled the\\u00a0ResolveResultClickableUriProcessor processor (more <a href=\\\"https://developers.coveo.com/display/SitecoreV3/Using+the+Sitecore+LinkManager+to+Resolve+URIs+in+a+Coveo+Search+Page\\\" target=\\\"_blank\\\">here</a>)<br><br>When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on clikUri <a href=\\\"https://developers.coveo.com/display/SearchREST/Query+Results\\\" target=\\\"_blank\\\">here</a>).<br><br>For example, let,s say you have a site with en and fr language. In your search result for fr items, you would have this clickUri:<br><br><span style=\\\"\\\">clickUri: en/myItem</span>\"], \"sfarticletype\": [\"KB_Article__kav\"], \"kav_lastmodifieddate\": [1464641380], \"documenttype\": [\"article\"], \"sfkbarticlekavid\": [\"ka1320000008W7cAAE\"], \"kav_currencyisocode\": [\"CAD\"], \"sfproductc\": [\"Sitecore\"], \"foldingparent\": [\"5ed537ce882aa29a74aa9fd972fd0da0fce1900b90802e5db6324f81cf46\"], \"mappingtype\": [\"KB_Article\"], \"kav_isvisibleinpkb\": [true], \"kav_sourceid\": [\"5003200000x3oLOAAY\"], \"sfkbversionnumber\": [2], \"kav_isvisibleinapp\": [true], \"kav_resolution__c\": [\"A fix in for this Sitecore bug will be implemented in Coveo for Sitecore 2016 release.<br><br>In addition, here&#39;s a workaround to circumvent this bug:\\n<ol><li>Build the provided code in the Processor Section bellow. You\\u00a0will need to reference his Coveo.Framework dll and his Sitecore.Kernel dll.</li><li>Place the compiled code in the bin folder of your Sitecore\\u00a0instance.</li><li>Edit the Coveo.SearchProvider.Rest.config file by replacing the ResolveResultClickableUriProcessor by the one in the Configuration section bellow.</li><li>In your <span style=\\\"\\\">Coveo.SearchProvider.Rest.config, a</span>djust the parameter p_UrlUtilities of the processor, to match the type and dll he compiled.</li></ol>\\n<br><b>Configuration</b>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;processor type=&quot;Coveo.SearchProvider.Rest.Processors.CoveoProcessParsedRestResponse.ResolveResultClickableUriProcessor, Coveo.SearchProvider.Rest&quot; &gt;\\n    &lt;param name=&quot;p_UrlUtilities&quot; type=&quot;Coveo.Support.SupportUrlUtilities.SupportUrlUtilities, Coveo.Support.UrlUtilities&quot; /&gt;\\n    &lt;param name=&quot;p_SitecoreHelper&quot; type=&quot;Coveo.UI.Helpers.SitecoreHelper, Coveo.UIBase&quot; /&gt;\\n    &lt;param name=&quot;p_DatabaseFactory&quot; type=&quot;Coveo.Framework.Databases.DatabaseFactory, Coveo.Framework&quot; /&gt;\\n    &lt;param name=&quot;p_ItemUriFactory&quot; type=&quot;Coveo.Framework.Items.ItemUriFactory, Coveo.Framework&quot; /&gt;\\n&lt;/processor&gt;</pre>\\n<br><br><br><b>Processor</b>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nusing Coveo.Framework.Items;\\nusing Coveo.Framework.Links;\\nusing Coveo.Framework.Utils;\\nusing Sitecore.Sites;\\n\\nnamespace Coveo.Support.SupportUrlUtilities\\n{\\n    public class SupportUrlUtilities : IUrlUtilities\\n    {\\n        private UrlUtilities m_UrlUtilities;\\n\\n        public SupportUrlUtilities()\\n        {\\n            m_UrlUtilities = new UrlUtilities();\\n        }\\n\\n        public string GetItemUrl(IItem p_Item, IUrlOptions p_UrlOptions)\\n        {\\n            // Fix : inject the item&#39;s language into the url options.\\n            if (p_Item.Language != null) {\\n                p_UrlOptions.Language = p_Item.Language;\\n            }\\n            return m_UrlUtilities.GetItemUrl(p_Item, p_UrlOptions);\\n        }\\n\\n        public IUrlOptions GetDefaultUrlOptions()\\n        {\\n            return m_UrlUtilities.GetDefaultUrlOptions();\\n        }\\n\\n        public string GetInstanceName()\\n        {\\n            return m_UrlUtilities.GetInstanceName();\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item);\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item, int p_Width, int p_Height)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item, p_Width, p_Height);\\n        }\\n\\n        public string GetServerUrl()\\n        {\\n            return m_UrlUtilities.GetServerUrl();\\n        }\\n\\n        public SiteContext GetSite(string p_SiteName)\\n        {\\n            return m_UrlUtilities.GetSite(p_SiteName);\\n        }\\n\\n        public bool IsAbsoluteUrl(string p_Url)\\n        {\\n            return m_UrlUtilities.IsAbsoluteUrl(p_Url);\\n        }\\n    }\\n}</pre>\\n<br>\\u00a0\"], \"coveo_objecttype\": [\"KB_Article\"], \"printableuri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US\"], \"kav_datacategoryselections.attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o320000007Lf7AAE;/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o320000007Lf8AAE\"], \"kav_id\": [\"ka1320000008W7cAAE\"], \"sfresolutionc\": [\"A fix in for this Sitecore bug will be implemented in Coveo for Sitecore 2016 release.<br><br>In addition, here&#39;s a workaround to circumvent this bug:\\n<ol><li>Build the provided code in the Processor Section bellow. You\\u00a0will need to reference his Coveo.Framework dll and his Sitecore.Kernel dll.</li><li>Place the compiled code in the bin folder of your Sitecore\\u00a0instance.</li><li>Edit the Coveo.SearchProvider.Rest.config file by replacing the ResolveResultClickableUriProcessor by the one in the Configuration section bellow.</li><li>In your <span style=\\\"\\\">Coveo.SearchProvider.Rest.config, a</span>djust the parameter p_UrlUtilities of the processor, to match the type and dll he compiled.</li></ol>\\n<br><b>Configuration</b>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;processor type=&quot;Coveo.SearchProvider.Rest.Processors.CoveoProcessParsedRestResponse.ResolveResultClickableUriProcessor, Coveo.SearchProvider.Rest&quot; &gt;\\n    &lt;param name=&quot;p_UrlUtilities&quot; type=&quot;Coveo.Support.SupportUrlUtilities.SupportUrlUtilities, Coveo.Support.UrlUtilities&quot; /&gt;\\n    &lt;param name=&quot;p_SitecoreHelper&quot; type=&quot;Coveo.UI.Helpers.SitecoreHelper, Coveo.UIBase&quot; /&gt;\\n    &lt;param name=&quot;p_DatabaseFactory&quot; type=&quot;Coveo.Framework.Databases.DatabaseFactory, Coveo.Framework&quot; /&gt;\\n    &lt;param name=&quot;p_ItemUriFactory&quot; type=&quot;Coveo.Framework.Items.ItemUriFactory, Coveo.Framework&quot; /&gt;\\n&lt;/processor&gt;</pre>\\n<br><br><br><b>Processor</b>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nusing Coveo.Framework.Items;\\nusing Coveo.Framework.Links;\\nusing Coveo.Framework.Utils;\\nusing Sitecore.Sites;\\n\\nnamespace Coveo.Support.SupportUrlUtilities\\n{\\n    public class SupportUrlUtilities : IUrlUtilities\\n    {\\n        private UrlUtilities m_UrlUtilities;\\n\\n        public SupportUrlUtilities()\\n        {\\n            m_UrlUtilities = new UrlUtilities();\\n        }\\n\\n        public string GetItemUrl(IItem p_Item, IUrlOptions p_UrlOptions)\\n        {\\n            // Fix : inject the item&#39;s language into the url options.\\n            if (p_Item.Language != null) {\\n                p_UrlOptions.Language = p_Item.Language;\\n            }\\n            return m_UrlUtilities.GetItemUrl(p_Item, p_UrlOptions);\\n        }\\n\\n        public IUrlOptions GetDefaultUrlOptions()\\n        {\\n            return m_UrlUtilities.GetDefaultUrlOptions();\\n        }\\n\\n        public string GetInstanceName()\\n        {\\n            return m_UrlUtilities.GetInstanceName();\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item);\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item, int p_Width, int p_Height)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item, p_Width, p_Height);\\n        }\\n\\n        public string GetServerUrl()\\n        {\\n            return m_UrlUtilities.GetServerUrl();\\n        }\\n\\n        public SiteContext GetSite(string p_SiteName)\\n        {\\n            return m_UrlUtilities.GetSite(p_SiteName);\\n        }\\n\\n        public bool IsAbsoluteUrl(string p_Url)\\n        {\\n            return m_UrlUtilities.IsAbsoluteUrl(p_Url);\\n        }\\n    }\\n}</pre>\\n<br>\\u00a0\"], \"foldingchild\": [\"5ed537ce882aa29a74aa9fd972fd0da0fce1900b90802e5db6324f81cf46\"], \"sfcreateddate\": [1464641368], \"kav_sitecore_version__c\": [\"8.0;8.1;N/A\"], \"kav_owner.coveo_record_size\": [2], \"kav_coveo_effective_modstamp\": [1513943071], \"kav_summary__html_stripped\": [\"\"], \"kav_dc_article_type\": [\"Product Issue\"], \"sfconnectorc\": [\"N/A\"], \"kav_dc_product\": [\"Sitecore\"], \"ka_coveo_record_size\": [2], \"kav_dc_expanded_article_type\": [\"All;All|Product Issue\"], \"kav_datacategoryselections.coveo_record_size\": [\"2;2\"], \"concepts\": [\"LinkBuilder takes Sitecore ; language ; Coveo ; clickUri ; bug ; config ; SearchProvider ; bin folder ; ResolveResultClickableUriProcessor ; Globalization\"], \"sfkbid\": [\"kA13200000005LuCAI\"], \"kav_firstpublisheddate\": [1453399452], \"coveo_organization_id\": [\"00D3000000007r2\"], \"coveo_foldingcollection\": [\"0a6c821bfad8e1ba948b7ddb5c85ecd36810ded8c07a903d515ed94b6beb\"], \"sffirstpublisheddate\": [1453399452], \"sflastmodifieddate\": [1464641380], \"kav_resolution__c__html_stripped\": [\"A fix in for this Sitecore bug will be implemented in Coveo for Sitecore 2016 release. \\n \\n In addition, here's a workaround to circumvent this bug:\\n Build the provided code in the Processor Section bellow. You\\u00a0will need to reference his Coveo.Framework dll and his Sitecore.Kernel dll. Place the compiled code in the bin folder of your Sitecore\\u00a0instance. Edit the Coveo.SearchProvider.Rest.config file by replacing the ResolveResultClickableUriProcessor by the one in the Configuration section bellow. In your  Coveo.SearchProvider.Rest.config, a djust the parameter p_UrlUtilities of the processor, to match the type and dll he compiled. \\n \\n Configuration \\n\\n \\n<processor type=\\\"Coveo.SearchProvider.Rest.Processors.CoveoProcessParsedRestResponse.ResolveResultClickableUriProcessor, Coveo.SearchProvider.Rest\\\" >\\n    <param name=\\\"p_UrlUtilities\\\" type=\\\"Coveo.Support.SupportUrlUtilities.SupportUrlUtilities, Coveo.Support.UrlUtilities\\\" />\\n    <param name=\\\"p_SitecoreHelper\\\" type=\\\"Coveo.UI.Helpers.SitecoreHelper, Coveo.UIBase\\\" />\\n    <param name=\\\"p_DatabaseFactory\\\" type=\\\"Coveo.Framework.Databases.DatabaseFactory, Coveo.Framework\\\" />\\n    <param name=\\\"p_ItemUriFactory\\\" type=\\\"Coveo.Framework.Items.ItemUriFactory, Coveo.Framework\\\" />\\n</processor> \\n \\n \\n \\n Processor \\n\\n \\nusing Coveo.Framework.Items;\\nusing Coveo.Framework.Links;\\nusing Coveo.Framework.Utils;\\nusing Sitecore.Sites;\\n\\nnamespace Coveo.Support.SupportUrlUtilities\\n{\\n    public class SupportUrlUtilities : IUrlUtilities\\n    {\\n        private UrlUtilities m_UrlUtilities;\\n\\n        public SupportUrlUtilities()\\n        {\\n            m_UrlUtilities = new UrlUtilities();\\n        }\\n\\n        public string GetItemUrl(IItem p_Item, IUrlOptions p_UrlOptions)\\n        {\\n            // Fix : inject the item's language into the url options.\\n            if (p_Item.Language != null) {\\n                p_UrlOptions.Language = p_Item.Language;\\n            }\\n            return m_UrlUtilities.GetItemUrl(p_Item, p_UrlOptions);\\n        }\\n\\n        public IUrlOptions GetDefaultUrlOptions()\\n        {\\n            return m_UrlUtilities.GetDefaultUrlOptions();\\n        }\\n\\n        public string GetInstanceName()\\n        {\\n            return m_UrlUtilities.GetInstanceName();\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item);\\n        }\\n\\n        public string GetMediaUrl(IItem p_Item, int p_Width, int p_Height)\\n        {\\n            return m_UrlUtilities.GetMediaUrl(p_Item, p_Width, p_Height);\\n        }\\n\\n        public string GetServerUrl()\\n        {\\n            return m_UrlUtilities.GetServerUrl();\\n        }\\n\\n        public SiteContext GetSite(string p_SiteName)\\n        {\\n            return m_UrlUtilities.GetSite(p_SiteName);\\n        }\\n\\n        public bool IsAbsoluteUrl(string p_Url)\\n        {\\n            return m_UrlUtilities.IsAbsoluteUrl(p_Url);\\n        }\\n    }\\n} \\n \\n \\u00a0\"], \"kav_vendor_version__c__html_stripped\": [\"\"], \"detectedlanguage\": [1], \"kav_isvisibleinprm\": [true], \"kav_owner.attribute.type\": [\"Name\"], \"kav_lastmodifiedby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000003q7JgAAI\"], \"sfversionc\": [\"3.0\"], \"sitename\": [\"Community\"], \"kav_createdby.name\": [\"Frederic Cote\"], \"sfarticlenumber\": [\"000001106\"], \"kav_lastmodifiedby.coveo_record_size\": [2], \"sfisvisibleinpkb\": [true], \"kav_datacategoryselections.id\": [\"02o320000007Lf7AAE;02o320000007Lf8AAE\"], \"kav_description__c\": [\"<b>Note</b><br>This article assumes that:<br>- You&#39;re NOT using a multi-site implementation in your Sitecore<br>- You&#39;ve configured your site in Sitecore such as<br>&lt;site name=&quot;mySite&quot; virtualFolder=&quot;/&quot; physicalFolder=&quot;/&quot; hostName=&quot;*mySite*&quot; targetHostName=&quot;mySite&quot;<br>- You&#39;ve enabled the\\u00a0ResolveResultClickableUriProcessor processor (more <a href=\\\"https://developers.coveo.com/display/SitecoreV3/Using+the+Sitecore+LinkManager+to+Resolve+URIs+in+a+Coveo+Search+Page\\\" target=\\\"_blank\\\">here</a>)<br><br>When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on clikUri <a href=\\\"https://developers.coveo.com/display/SearchREST/Query+Results\\\" target=\\\"_blank\\\">here</a>).<br><br>For example, let,s say you have a site with en and fr language. In your search result for fr items, you would have this clickUri:<br><br><span style=\\\"\\\">clickUri: en/myItem</span>\"], \"kav_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__kav/ka1320000008W7cAAE\"], \"kav_articlenumber__stripped\": [\"1106\"], \"sfversionnumber\": [2], \"kav_attribute.type\": [\"KB_Article__kav\"], \"kav_validationstatus\": [\"Reviewed\"], \"coveo_foldingparent\": [\"5ed537ce882aa29a74aa9fd972fd0da0fce1900b90802e5db6324f81cf46\"], \"collection\": [\"default\"], \"sfsourceid\": [\"5003200000x3oLOAAY\"], \"date\": [1513943071], \"kav_lastmodifiedby.id\": [\"00560000003q7JgAAI\"], \"kav_datacategoryselections.datacategorygroupname\": [\"Article_Type;Product\"], \"conversionstate\": [0], \"sfvalidationstatus\": [\"Reviewed\"], \"kav_isdeleted\": [false], \"sflastmodifiedbyid\": [\"00560000003q7JgAAI\"], \"kav_lastmodifiedby.name\": [\"Frederic Cote\"], \"kav_articlenumber\": [\"000001106\"], \"permanentid\": [\"0621b320481a38a2432bbb7de29f938b5be860e63ce8125bf9547d3b61f6\"]}",
      "sfbuildc" : "All",
      "sflastmodifiedbyid" : "00560000003q7JgAAI",
      "sfproductc" : "Sitecore",
      "syssfownerid" : "00560000003q7JgAAI",
      "sfsitecoreversionc" : "8.0;8.1;N/A",
      "sourcetype" : "Salesforce",
      "sysconnectortype" : "Salesforce2",
      "sftitle" : "clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site",
      "rowid" : 5492358,
      "syssfcreatedbyid" : "00560000003q7JgAAI",
      "sfdescriptionc" : "<b>Note</b><br>This article assumes that:<br>- You&#39;re NOT using a multi-site implementation in your Sitecore<br>- You&#39;ve configured your site in Sitecore such as<br>&lt;site name=&quot;mySite&quot; virtualFolder=&quot;/&quot; physicalFolder=&quot;/&quot; hostName=&quot;*mySite*&quot; targetHostName=&quot;mySite&quot;<br>- You&#39;ve enabled the ResolveResultClickableUriProcessor processor (more <a href=\"https://developers.coveo.com/display/SitecoreV3/Using+the+Sitecore+LinkManager+to+Resolve+URIs+in+a+Coveo+Search+Page\" target=\"_blank\">here</a>)<br><br>When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on clikUri <a href=\"https://developers.coveo.com/display/SearchREST/Query+Results\" target=\"_blank\">here</a>).<br><br>For example, let,s say you have a site with en and fr language. In your search result for fr items, you would have this clickUri:<br><br><span style=\"\">clickUri: en/myItem</span>",
      "size" : 10785,
      "sfislatestversion" : "true",
      "sysdocumenttype" : "article",
      "sfcreateddate" : 1464641368000,
      "sfsourceid" : "5003200000x3oLOAAY",
      "clickableuri" : "https://na61.salesforce.com/kA13200000005Lu",
      "syssource" : "Salesforce Public Items",
      "sfownerid" : "00560000003q7JgAAI",
      "orderingid" : 212384990660371161,
      "sfpublishstatus" : "Online",
      "syssize" : 10785,
      "sysdate" : 1513943071000,
      "sflanguage" : "en_US",
      "sysparents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site\" uri=\"https://na61.salesforce.com/kA13200000005Lu\" /></parents>",
      "sfdcexpandedarticletype" : "All;All|Product Issue",
      "sfcurrencyisocode" : "CAD",
      "sfkbid" : "kA13200000005LuCAI",
      "sfcausec" : "This behavior is caused by a bug in Sitecore. <br><br>Indeed, the LinkBuilder takes Sitecore.Globalization.Language.Current instead of the language on the item. In other words, Sitecore does not take into account the language of the item.",
      "sfdcexpandedproduct" : "All;All|Sitecore",
      "syssfcreateddate" : 1464641368000,
      "sflastmodifieddate" : 1464641380000,
      "sfisvisibleinpkb" : "true",
      "source" : "Salesforce Public Items",
      "sfarticletypec" : "Product Issue",
      "sfisdeleted" : "false",
      "sfisvisibleincsp" : "true",
      "sfvalidationstatus" : "Reviewed",
      "sflastmodifiedbyname" : "Frederic Cote",
      "collection" : "default",
      "sfdcproduct" : [ "Sitecore" ],
      "syssourcetype" : "Salesforce",
      "sfarticletype" : "KB_Article__kav",
      "indexeddate" : 1518187531000,
      "connectortype" : "Salesforce2",
      "filetype" : "SalesforceItem",
      "sfcreatedbyname" : "Frederic Cote",
      "sysclickableuri" : "https://na61.salesforce.com/kA13200000005Lu",
      "sysfiletype" : "SalesforceItem",
      "language" : [ "English" ],
      "sffirstpublisheddate" : 1453399452000,
      "sfownername" : "Frederic Cote",
      "sitename" : "Community",
      "sysrowid" : 5492358,
      "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
      "syscollection" : "default"
    },
    "Title" : "clickUri not being compiled correctly when using ResolveResultClickableUriProcessor in multi-language site",
    "Uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
    "PrintableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
    "ClickUri" : "https://na61.salesforce.com/kA13200000005Lu",
    "UniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000005LuCAI/language:en_US",
    "Excerpt" : "When using Coveo for Sitecore for a multi-language site, the clickUri displayed on your search page always displays the default language of your Sitecore, regardless of the item language (more on c...",
    "FirstSentences" : null
  }