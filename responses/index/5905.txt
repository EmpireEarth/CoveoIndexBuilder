{
    "title" : "Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity",
    "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
    "printableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
    "clickUri" : "https://na61.salesforce.com/kA13200000006uv",
    "uniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
    "excerpt" : "Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). ... When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is acc...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1251,
    "percentScore" : 79.58755,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity",
      "sysurihash" : "y4VZT8HUFlE592Rf",
      "urihash" : "y4VZT8HUFlE592Rf",
      "parents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\" uri=\"https://na61.salesforce.com/kA13200000006uv\" /></parents>",
      "sfdcarticletype" : "Product Issue",
      "sfresolutionc" : "Install Coveo .NET Front-End 12.0.1459+ (March 2016)<br><br>With this Build, you can add an option in the web.config file. Its name is &quot;assumedHttpRequestUrlScheme&quot;, and its value can be &quot;http&quot; or &quot;https&quot;. If absent, the .NET UI behaves as before and assume that IIS detects the right scheme used to open the search page. If present, the .NET UI assumes that the page is always opened using the specified scheme, and it&#39;s up to the customer to make sure that the information is right. <br><br>For example, if the value &quot;https&quot; is specified, the IIS site must be configured to switch automatically in HTTPS if a browser tries to open the search page in HTTP. <br> \n<pre class=\"ckeditor_codeblock\">\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; \n. . . \n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;/sectionGroup&gt; \n. . . \n&lt;coveoEnterpriseSearch&gt; \n. . . \n&lt;options assumedHttpRequestUriScheme=&quot;https&quot; /&gt; \n&lt;/coveoEnterpriseSearch&gt;</pre>\n<br>Notes: <br>1) After upgrading to Coveo .NET Front-End 12.0.1459 or later, make sure that the ClaimsIdentityProvider.aspx file is upgraded correctly. It should contain &quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade.<br>ClaimsIdentityProvider.aspx is located in the SharePoint server, into &quot;[DRIVE]:\\Program Files\\Coveo .NET Front-End 12\\Web\\SharePoint&quot; folder.<br><br>If the &quot;ClaimsIdentityProvider.aspx&quot; file doesn&#39;t contain  &quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade, that means that the file was previously changed manually. <br><br>In order to fix this, rename the file or delete it &gt;  Run a repair of the Coveo Front-End and you will get the updated file<br><br><img alt=\"User-added image\" height=\"335\" src=\"https://c.na61.content.force.com/servlet/rtaImage?eid=ka1320000000CyT&amp;feoid=00N32000002zy1J&amp;refid=0EM320000009qjc\" width=\"500\"></img><br> <br>2) Also on the SharePoint server, open the following file in a text editor: C:\\inetpub\\wwwroot\\wss\\VirtualDirectories\\[PORT_NUMBER]\\web.config. <br>In the &lt;coveoEnterpriseSearch&gt;...&lt;/coveoEnterpriseSearch&gt; section, add: &lt;options assumedHttpReq <br><br>3) If not already there, you need to manually add the &quot;Option&quot; at the beginning of the WEB.config file in order for IIS to accept the &lt;options...&gt; line.<br><br>Usually, this line already exists in the WEB.config file, but it needs to be manually added when it&#39;s missing. <br><br>You need to do it in both WEB.config file, the one from SharePoint server and the one from Coveo Front-End server<br><br>So basically this is the line that needs to be added: <br> \n<pre class=\"ckeditor_codeblock\">\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;</pre>\n<br>It needs to be added into the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section. <br><br>Example: <br> \n<pre class=\"ckeditor_codeblock\">\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; \n&lt;section name=&quot;server&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;section name=&quot;alternateServers&quot; type=&quot;Coveo.CES.Web.Search.AlternateServersSectionHandler, Coveo.CES.Web.Search, Version=12.0.0.0, Culture=neutral, PublicKeyToken=44110d16825221f2&quot; /&gt; \n&lt;section name=&quot;database&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;section name=&quot;analytics&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;section name=&quot;locations&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;section name=&quot;strings&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;section name=&quot;claimsAuthentication&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; \n&lt;/sectionGroup&gt;</pre>\n<br>So you need to add &lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; in your WEB.config files ( the one from SharePoint server and the one from Coveo Front-End server) in the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section",
      "sysuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
      "sysprintableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
      "sflastpublisheddate" : 1497373132000,
      "systransactionid" : 161139,
      "sfversionc" : "Coveo .NET Front-End",
      "sfurlname" : "1277",
      "sfsystemmodstamp" : 1509619413000,
      "sfisvisibleinapp" : "true",
      "sfcoveoversionc" : ".NET Search Interface",
      "sysconcepts" : "config file ; Coveo Front-End ; IIS ; server ; scheme ; vice versa ; missing ; Usually ; assumedHttpRequestUrlScheme ; connection ; validation",
      "sfkbversionnumber" : "1",
      "concepts" : "config file ; Coveo Front-End ; IIS ; server ; scheme ; vice versa ; missing ; Usually ; assumedHttpRequestUrlScheme ; connection ; validation",
      "printableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
      "documenttype" : "article",
      "sfkbarticlekavid" : "ka1320000000CyTAAU",
      "sysindexeddate" : 1518187564000,
      "sfknowledgearticleid" : "kA13200000006uvCAA",
      "sfcreatedbyid" : "00560000002MKBSAA4",
      "sfconnectorc" : "N/A",
      "permanentid" : "eba727765f04e71caa2233e73b90d7bba72853554532827bfedf00d8ff6e",
      "syslanguage" : [ "English" ],
      "transactionid" : 161139,
      "sfisvisibleinprm" : "true",
      "title" : "Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity",
      "sfversionnumber" : 1,
      "sfarticlenumber" : "000001277",
      "date" : 1509619413000,
      "objecttype" : "KB Article",
      "allmetadatavalues" : "{\"kav_lastmodifiedby.attribute.type\": [\"User\"], \"coveo_short_id\": [\"kA13200000006uv\"], \"sflastmodifiedbyname\": [\"Karel Mpungi\"], \"kav_coveo_version__c__html_stripped\": [\".NET Search Interface\"], \"fileextension\": [\"\"], \"sfdcexpandedproduct\": [\"All;All|.NET Search Interface\"], \"kav_createdby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000002MKBSAA4\"], \"sflanguage\": [\"en_US\"], \"kav_createdby.attribute.type\": [\"User\"], \"kav_createdby.id\": [\"00560000002MKBSAA4\"], \"kav_language\": [\"en_US\"], \"sfsitecoreversionc\": [\"N/A\"], \"sourcetype\": [\"Salesforce\"], \"title\": [\"Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\"], \"source\": [\"Salesforce Public Items\"], \"kav_owner.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000002MKBSAA4\"], \"parents\": [\"<?xml version=\\\"1.0\\\" encoding=\\\"utf-16\\\"?><parents><parent name=\\\"Organization\\\" uri=\\\"https://na61.salesforce.com/home/home.jsp\\\" /><parent name=\\\"KB_Article__ka\\\" uri=\\\"http://www.salesforce.com/org:organization/articletype:KB_Article\\\" /><parent name=\\\"Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\\\" uri=\\\"https://na61.salesforce.com/kA13200000006uv\\\" /></parents>\"], \"sfisvisibleinprm\": [true], \"kav_title\": [\"Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\"], \"kav_isvisibleincsp\": [true], \"hashtmlversion\": [true], \"sfarticletypec\": [\"How To\"], \"kav_version__c\": [\"Coveo .NET Front-End\"], \"kav_versionnumber\": [1], \"sfcreatedbyname\": [\"Karel Mpungi\"], \"sflastpublisheddate\": [1497373132], \"objecttypelabel\": [\"KB Article\"], \"kav_cause__c__html_stripped\": [\"Starting with Coveo .NET Front-End 12.0.1376+ (December 2015), HTTP redirection loop is supported.Before,only HTTPS redirection loop was supported, and now HTTP redirection loop is supported as well. \\n \\n Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is accessed through an HTTP connection instead of HTTPS or vice versa you'll get the following error: \\n \\n Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity. at ASP._layouts_ces_claimsidentityprovider_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) when trying to access to their search interface page. \\n \\u00a0\"], \"originalhtmlcharset\": [1200], \"coveo_connector_hasbinarydata\": [false], \"kav_lastpublisheddate\": [1497373132], \"sfsystemmodstamp\": [1509619413], \"ka_attribute.type\": [\"KB_Article__ka\"], \"sfdcproduct\": [\".NET Search Interface\"], \"kav_resolution__c__html_stripped\": [\"Install Coveo .NET Front-End 12.0.1459+ (March 2016) \\n \\n With this Build, you can add an option in the web.config file. Its name is \\\"assumedHttpRequestUrlScheme\\\", and its value can be \\\"http\\\" or \\\"https\\\". If absent, the .NET UI behaves as before and assume that IIS detects the right scheme used to open the search page. If present, the .NET UI assumes that the page is always opened using the specified scheme, and it's up to the customer to make sure that the information is right.\\u00a0 \\n \\n For example, if the value \\\"https\\\" is specified, the IIS site must be configured to switch automatically in HTTPS if a browser tries to open the search page in HTTP.\\u00a0 \\n \\u00a0\\n \\n<sectionGroup name=\\\"coveoEnterpriseSearch\\\">\\u00a0\\n. . .\\u00a0\\n<section name=\\\"options\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n</sectionGroup>\\u00a0\\n. . .\\u00a0\\n<coveoEnterpriseSearch>\\u00a0\\n. . .\\u00a0\\n<options assumedHttpRequestUriScheme=\\\"https\\\" />\\u00a0\\n</coveoEnterpriseSearch> \\n \\n Notes:\\u00a0 \\n 1) After upgrading to Coveo .NET Front-End 12.0.1459 or later, make sure that the ClaimsIdentityProvider.aspx file is upgraded correctly. It should contain \\\"SearchUtilities.GetCurrentHttpRequestUrl()\\\" after the upgrade. \\n ClaimsIdentityProvider.aspx is located in the SharePoint server, into \\\"[DRIVE]:\\\\Program Files\\\\Coveo .NET Front-End 12\\\\Web\\\\SharePoint\\\" folder. \\n \\n If the \\\"ClaimsIdentityProvider.aspx\\\" file doesn't contain \\u00a0\\\"SearchUtilities.GetCurrentHttpRequestUrl()\\\" after the upgrade, that means that the file was previously changed manually.\\u00a0 \\n \\n In order to fix this, rename the file or delete it > \\u00a0Run a repair of the Coveo Front-End and you will get the updated file \\n \\n  \\n \\u00a0 \\n 2) Also on the SharePoint server, open the following file in a text editor: C:\\\\inetpub\\\\wwwroot\\\\wss\\\\VirtualDirectories\\\\[PORT_NUMBER]\\\\web.config.\\u00a0 \\n In the <coveoEnterpriseSearch>...</coveoEnterpriseSearch> section, add: <options assumedHttpReq\\u00a0 \\n \\n 3) If not already there, you need to manually add the \\\"Option\\\" at the beginning of the WEB.config file in order for IIS to accept the <options...> line. \\n \\n Usually, this line already exists in the WEB.config file, but it needs to be manually added when it's missing.\\u00a0 \\n \\n You need to do it in both WEB.config file, the one from SharePoint server and the one from Coveo Front-End server \\n \\n So basically this is the line that needs to be added:\\u00a0 \\n \\u00a0\\n \\n<section name=\\\"options\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" /> \\n \\n It needs to be added into the <sectionGroup name=\\\"coveoEnterpriseSearch\\\"> section.\\u00a0 \\n \\n Example:\\u00a0 \\n \\u00a0\\n \\n<sectionGroup name=\\\"coveoEnterpriseSearch\\\">\\u00a0\\n<section name=\\\"server\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n<section name=\\\"alternateServers\\\" type=\\\"Coveo.CES.Web.Search.AlternateServersSectionHandler, Coveo.CES.Web.Search, Version=12.0.0.0, Culture=neutral, PublicKeyToken=44110d16825221f2\\\" />\\u00a0\\n<section name=\\\"database\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n<section name=\\\"analytics\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n<section name=\\\"locations\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n<section name=\\\"strings\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n<section name=\\\"claimsAuthentication\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n<section name=\\\"options\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" />\\u00a0\\n</sectionGroup> \\n \\n So you need to add <section name=\\\"options\\\" type=\\\"System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" /> in your WEB.config files ( the one from SharePoint server and the one from Coveo Front-End server) in the <sectionGroup name=\\\"coveoEnterpriseSearch\\\"> section\"], \"clickableuri\": [\"https://na61.salesforce.com/kA13200000006uv\"], \"kav_dc_expanded_product\": [\"All;All|.NET Search Interface\"], \"sftitle\": [\"Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\"], \"kav_owner.id\": [\"00560000002MKBSAA4\"], \"sfbuildc\": [\"1376 or later\"], \"sfisvisibleinapp\": [true], \"ka_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__ka/kA13200000006uvCAA\"], \"sfdcarticletype\": [\"Product Issue\"], \"kav_cause__c\": [\"Starting with Coveo .NET Front-End 12.0.1376+ (December 2015), HTTP redirection loop is supported.Before,only HTTPS redirection loop was supported, and now HTTP redirection loop is supported as well.<br><br>Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is accessed through an HTTP connection instead of HTTPS or vice versa you&#39;ll get the following error:<br><br>Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity. at ASP._layouts_ces_claimsidentityprovider_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) when trying to access to their search interface page.<br>\\u00a0\"], \"sfislatestversion\": [true], \"sfcausec\": [\"Starting with Coveo .NET Front-End 12.0.1376+ (December 2015), HTTP redirection loop is supported.Before,only HTTPS redirection loop was supported, and now HTTP redirection loop is supported as well.<br><br>Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is accessed through an HTTP connection instead of HTTPS or vice versa you&#39;ll get the following error:<br><br>Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity. at ASP._layouts_ces_claimsidentityprovider_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) when trying to access to their search interface page.<br>\\u00a0\"], \"contenttype\": [\"binarydata\"], \"sfurlname\": [\"1277\"], \"ka_id\": [\"kA13200000006uvCAA\"], \"kav_datacategoryselections.datacategoryname\": [\"NET_Search_Interface;Product_Issue\"], \"coveo_url\": [\"https://na61.salesforce.com/kA13200000006uv\"], \"kav_urlname\": [\"1277\"], \"kav_articletype\": [\"KB_Article__kav\"], \"foldingcollection\": [\"fc4465dd089f0a9ff058510c640d2c1f4a50d5cf84f82392b60a44aafbfe\"], \"body\": [\"<html>   <body>     <div style=\\\"background-color: #fff;border: 2px solid #BBC5CC;border-radius: 4px;float: left;font-family: lato;margin-left: 15px;margin-right: 15px;margin-bottom: 4%;padding: 10px;width: 60%;\\\">       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Description         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> This article explains how to fix the\\u00a0Error: Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity</div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Environment         </div>       </div>       <br/>       <table>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Product</td>           <td>.NET Search Interface</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Sitecore Version</td>           <td>N/A</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Connector</td>           <td>N/A</td>         </tr>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Published</td>           <td>1497373132</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Version</td>           <td>Coveo .NET Front-End</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Build</td>           <td>1376 or later</td>         </tr>       </table>       <br/>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Cause         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> Starting with Coveo .NET Front-End 12.0.1376+ (December 2015), HTTP redirection loop is supported.Before,only HTTPS redirection loop was supported, and now HTTP redirection loop is supported as well.<br><br>Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is accessed through an HTTP connection instead of HTTPS or vice versa you&#39;ll get the following error:<br><br>Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity. at ASP._layouts_ces_claimsidentityprovider_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) when trying to access to their search interface page.<br>\\u00a0</div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Resolution         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> Install Coveo .NET Front-End 12.0.1459+ (March 2016)<br><br>With this Build, you can add an option in the web.config file. Its name is &quot;assumedHttpRequestUrlScheme&quot;, and its value can be &quot;http&quot; or &quot;https&quot;. If absent, the .NET UI behaves as before and assume that IIS detects the right scheme used to open the search page. If present, the .NET UI assumes that the page is always opened using the specified scheme, and it&#39;s up to the customer to make sure that the information is right.\\u00a0<br><br>For example, if the value &quot;https&quot; is specified, the IIS site must be configured to switch automatically in HTTPS if a browser tries to open the search page in HTTP.\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt;\\u00a0\\n. . .\\u00a0\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;/sectionGroup&gt;\\u00a0\\n. . .\\u00a0\\n&lt;coveoEnterpriseSearch&gt;\\u00a0\\n. . .\\u00a0\\n&lt;options assumedHttpRequestUriScheme=&quot;https&quot; /&gt;\\u00a0\\n&lt;/coveoEnterpriseSearch&gt;</pre>\\n<br>Notes:\\u00a0<br>1) After upgrading to Coveo .NET Front-End 12.0.1459 or later, make sure that the ClaimsIdentityProvider.aspx file is upgraded correctly. It should contain &quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade.<br>ClaimsIdentityProvider.aspx is located in the SharePoint server, into &quot;[DRIVE]:\\\\Program Files\\\\Coveo .NET Front-End 12\\\\Web\\\\SharePoint&quot; folder.<br><br>If the &quot;ClaimsIdentityProvider.aspx&quot; file doesn&#39;t contain \\u00a0&quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade, that means that the file was previously changed manually.\\u00a0<br><br>In order to fix this, rename the file or delete it &gt; \\u00a0Run a repair of the Coveo Front-End and you will get the updated file<br><br><img alt=\\\"User-added image\\\" height=\\\"335\\\" src=\\\"https://c.na61.content.force.com/servlet/rtaImage?eid=ka1320000000CyT&amp;feoid=00N32000002zy1J&amp;refid=0EM320000009qjc\\\" width=\\\"500\\\"></img><br>\\u00a0<br>2) Also on the SharePoint server, open the following file in a text editor: C:\\\\inetpub\\\\wwwroot\\\\wss\\\\VirtualDirectories\\\\[PORT_NUMBER]\\\\web.config.\\u00a0<br>In the &lt;coveoEnterpriseSearch&gt;...&lt;/coveoEnterpriseSearch&gt; section, add: &lt;options assumedHttpReq\\u00a0<br><br>3) If not already there, you need to manually add the &quot;Option&quot; at the beginning of the WEB.config file in order for IIS to accept the &lt;options...&gt; line.<br><br>Usually, this line already exists in the WEB.config file, but it needs to be manually added when it&#39;s missing.\\u00a0<br><br>You need to do it in both WEB.config file, the one from SharePoint server and the one from Coveo Front-End server<br><br>So basically this is the line that needs to be added:\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;</pre>\\n<br>It needs to be added into the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section.\\u00a0<br><br>Example:\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt;\\u00a0\\n&lt;section name=&quot;server&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;alternateServers&quot; type=&quot;Coveo.CES.Web.Search.AlternateServersSectionHandler, Coveo.CES.Web.Search, Version=12.0.0.0, Culture=neutral, PublicKeyToken=44110d16825221f2&quot; /&gt;\\u00a0\\n&lt;section name=&quot;database&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;analytics&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;locations&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;strings&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;claimsAuthentication&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;/sectionGroup&gt;</pre>\\n<br>So you need to add &lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; in your WEB.config files ( the one from SharePoint server and the one from Coveo Front-End server) in the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section</div>     </div>   </body> </html>\"], \"kav_product__c\": [\".NET Search Interface\"], \"kav_article_type__c\": [\"How To\"], \"sfpublishstatus\": [\"Online\"], \"sfcreatedbyid\": [\"00560000002MKBSAA4\"], \"kav_description__c__html_stripped\": [\"This article explains how to fix the\\u00a0Error: Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\"], \"kav_islatestversion\": [true], \"kav_knowledgearticleid\": [\"kA13200000006uvCAA\"], \"sfknowledgearticleid\": [\"kA13200000006uvCAA\"], \"sfownername\": [\"Karel Mpungi\"], \"kav_datacategoryselections.attribute.type\": [\"KB_Article__DataCategorySelection;KB_Article__DataCategorySelection\"], \"detectedtitle\": [\"Description\"], \"kav_createddate\": [1458912061], \"kav_build__c\": [\"1376 or later\"], \"language\": [\"English\"], \"coveo_foldingchild\": [\"25d445d65f7401eb0994f4858365e52457971a879ab634a9b0425b0148ef\"], \"sfownerid\": [\"00560000002MKBSAA4\"], \"kav_createdby.coveo_record_size\": [2], \"kav_systemmodstamp\": [1509619413], \"objecttype\": [\"KB Article\"], \"connectortype\": [\"Salesforce2\"], \"kav_coveo_record_size\": [4], \"originaluri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US\"], \"sfisvisibleincsp\": [true], \"convertertype\": [\"TYPE_HTML\"], \"filetype\": [\"SalesforceItem\"], \"kav_owner.name\": [\"Karel Mpungi\"], \"sfcoveoversionc\": [\".NET Search Interface\"], \"sfdcexpandedarticletype\": [\"All;All|Product Issue\"], \"objecttypelabelplural\": [\"KB Articles\"], \"sfcurrencyisocode\": [\"USD\"], \"sfisdeleted\": [false], \"extractedsize\": [10902], \"size\": [14079], \"kav_publishstatus\": [\"Online\"], \"kav_connector__c\": [\"N/A\"], \"generateexcerpt\": [true], \"sfdescriptionc\": [\"This article explains how to fix the\\u00a0Error: Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\"], \"sfarticletype\": [\"KB_Article__kav\"], \"kav_lastmodifieddate\": [1497373132], \"documenttype\": [\"article\"], \"sfkbarticlekavid\": [\"ka1320000000CyTAAU\"], \"kav_currencyisocode\": [\"USD\"], \"sfproductc\": [\".NET Search Interface\"], \"foldingparent\": [\"25d445d65f7401eb0994f4858365e52457971a879ab634a9b0425b0148ef\"], \"mappingtype\": [\"KB_Article\"], \"kav_isvisibleinpkb\": [true], \"kav_sourceid\": [\"5003200000wlzy8AAA\"], \"sfkbversionnumber\": [1], \"kav_isvisibleinapp\": [true], \"kav_resolution__c\": [\"Install Coveo .NET Front-End 12.0.1459+ (March 2016)<br><br>With this Build, you can add an option in the web.config file. Its name is &quot;assumedHttpRequestUrlScheme&quot;, and its value can be &quot;http&quot; or &quot;https&quot;. If absent, the .NET UI behaves as before and assume that IIS detects the right scheme used to open the search page. If present, the .NET UI assumes that the page is always opened using the specified scheme, and it&#39;s up to the customer to make sure that the information is right.\\u00a0<br><br>For example, if the value &quot;https&quot; is specified, the IIS site must be configured to switch automatically in HTTPS if a browser tries to open the search page in HTTP.\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt;\\u00a0\\n. . .\\u00a0\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;/sectionGroup&gt;\\u00a0\\n. . .\\u00a0\\n&lt;coveoEnterpriseSearch&gt;\\u00a0\\n. . .\\u00a0\\n&lt;options assumedHttpRequestUriScheme=&quot;https&quot; /&gt;\\u00a0\\n&lt;/coveoEnterpriseSearch&gt;</pre>\\n<br>Notes:\\u00a0<br>1) After upgrading to Coveo .NET Front-End 12.0.1459 or later, make sure that the ClaimsIdentityProvider.aspx file is upgraded correctly. It should contain &quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade.<br>ClaimsIdentityProvider.aspx is located in the SharePoint server, into &quot;[DRIVE]:\\\\Program Files\\\\Coveo .NET Front-End 12\\\\Web\\\\SharePoint&quot; folder.<br><br>If the &quot;ClaimsIdentityProvider.aspx&quot; file doesn&#39;t contain \\u00a0&quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade, that means that the file was previously changed manually.\\u00a0<br><br>In order to fix this, rename the file or delete it &gt; \\u00a0Run a repair of the Coveo Front-End and you will get the updated file<br><br><img alt=\\\"User-added image\\\" height=\\\"335\\\" src=\\\"https://c.na61.content.force.com/servlet/rtaImage?eid=ka1320000000CyT&amp;feoid=00N32000002zy1J&amp;refid=0EM320000009qjc\\\" width=\\\"500\\\"></img><br>\\u00a0<br>2) Also on the SharePoint server, open the following file in a text editor: C:\\\\inetpub\\\\wwwroot\\\\wss\\\\VirtualDirectories\\\\[PORT_NUMBER]\\\\web.config.\\u00a0<br>In the &lt;coveoEnterpriseSearch&gt;...&lt;/coveoEnterpriseSearch&gt; section, add: &lt;options assumedHttpReq\\u00a0<br><br>3) If not already there, you need to manually add the &quot;Option&quot; at the beginning of the WEB.config file in order for IIS to accept the &lt;options...&gt; line.<br><br>Usually, this line already exists in the WEB.config file, but it needs to be manually added when it&#39;s missing.\\u00a0<br><br>You need to do it in both WEB.config file, the one from SharePoint server and the one from Coveo Front-End server<br><br>So basically this is the line that needs to be added:\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;</pre>\\n<br>It needs to be added into the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section.\\u00a0<br><br>Example:\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt;\\u00a0\\n&lt;section name=&quot;server&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;alternateServers&quot; type=&quot;Coveo.CES.Web.Search.AlternateServersSectionHandler, Coveo.CES.Web.Search, Version=12.0.0.0, Culture=neutral, PublicKeyToken=44110d16825221f2&quot; /&gt;\\u00a0\\n&lt;section name=&quot;database&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;analytics&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;locations&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;strings&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;claimsAuthentication&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;/sectionGroup&gt;</pre>\\n<br>So you need to add &lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; in your WEB.config files ( the one from SharePoint server and the one from Coveo Front-End server) in the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section\"], \"coveo_objecttype\": [\"KB_Article\"], \"printableuri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US\"], \"kav_datacategoryselections.attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o320000003sLWAAY;/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o320000003sLVAAY\"], \"kav_id\": [\"ka1320000000CyTAAU\"], \"sfresolutionc\": [\"Install Coveo .NET Front-End 12.0.1459+ (March 2016)<br><br>With this Build, you can add an option in the web.config file. Its name is &quot;assumedHttpRequestUrlScheme&quot;, and its value can be &quot;http&quot; or &quot;https&quot;. If absent, the .NET UI behaves as before and assume that IIS detects the right scheme used to open the search page. If present, the .NET UI assumes that the page is always opened using the specified scheme, and it&#39;s up to the customer to make sure that the information is right.\\u00a0<br><br>For example, if the value &quot;https&quot; is specified, the IIS site must be configured to switch automatically in HTTPS if a browser tries to open the search page in HTTP.\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt;\\u00a0\\n. . .\\u00a0\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;/sectionGroup&gt;\\u00a0\\n. . .\\u00a0\\n&lt;coveoEnterpriseSearch&gt;\\u00a0\\n. . .\\u00a0\\n&lt;options assumedHttpRequestUriScheme=&quot;https&quot; /&gt;\\u00a0\\n&lt;/coveoEnterpriseSearch&gt;</pre>\\n<br>Notes:\\u00a0<br>1) After upgrading to Coveo .NET Front-End 12.0.1459 or later, make sure that the ClaimsIdentityProvider.aspx file is upgraded correctly. It should contain &quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade.<br>ClaimsIdentityProvider.aspx is located in the SharePoint server, into &quot;[DRIVE]:\\\\Program Files\\\\Coveo .NET Front-End 12\\\\Web\\\\SharePoint&quot; folder.<br><br>If the &quot;ClaimsIdentityProvider.aspx&quot; file doesn&#39;t contain \\u00a0&quot;SearchUtilities.GetCurrentHttpRequestUrl()&quot; after the upgrade, that means that the file was previously changed manually.\\u00a0<br><br>In order to fix this, rename the file or delete it &gt; \\u00a0Run a repair of the Coveo Front-End and you will get the updated file<br><br><img alt=\\\"User-added image\\\" height=\\\"335\\\" src=\\\"https://c.na61.content.force.com/servlet/rtaImage?eid=ka1320000000CyT&amp;feoid=00N32000002zy1J&amp;refid=0EM320000009qjc\\\" width=\\\"500\\\"></img><br>\\u00a0<br>2) Also on the SharePoint server, open the following file in a text editor: C:\\\\inetpub\\\\wwwroot\\\\wss\\\\VirtualDirectories\\\\[PORT_NUMBER]\\\\web.config.\\u00a0<br>In the &lt;coveoEnterpriseSearch&gt;...&lt;/coveoEnterpriseSearch&gt; section, add: &lt;options assumedHttpReq\\u00a0<br><br>3) If not already there, you need to manually add the &quot;Option&quot; at the beginning of the WEB.config file in order for IIS to accept the &lt;options...&gt; line.<br><br>Usually, this line already exists in the WEB.config file, but it needs to be manually added when it&#39;s missing.\\u00a0<br><br>You need to do it in both WEB.config file, the one from SharePoint server and the one from Coveo Front-End server<br><br>So basically this is the line that needs to be added:\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;</pre>\\n<br>It needs to be added into the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section.\\u00a0<br><br>Example:\\u00a0<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\n&lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt;\\u00a0\\n&lt;section name=&quot;server&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;alternateServers&quot; type=&quot;Coveo.CES.Web.Search.AlternateServersSectionHandler, Coveo.CES.Web.Search, Version=12.0.0.0, Culture=neutral, PublicKeyToken=44110d16825221f2&quot; /&gt;\\u00a0\\n&lt;section name=&quot;database&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;analytics&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;locations&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;strings&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;claimsAuthentication&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;\\u00a0\\n&lt;/sectionGroup&gt;</pre>\\n<br>So you need to add &lt;section name=&quot;options&quot; type=&quot;System.Configuration.SingleTagSectionHandler, System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt; in your WEB.config files ( the one from SharePoint server and the one from Coveo Front-End server) in the &lt;sectionGroup name=&quot;coveoEnterpriseSearch&quot;&gt; section\"], \"foldingchild\": [\"25d445d65f7401eb0994f4858365e52457971a879ab634a9b0425b0148ef\"], \"sfcreateddate\": [1458912061], \"kav_sitecore_version__c\": [\"N/A\"], \"kav_owner.coveo_record_size\": [2], \"kav_coveo_effective_modstamp\": [1509619413], \"kav_summary__html_stripped\": [\"\"], \"kav_dc_article_type\": [\"Product Issue\"], \"sfconnectorc\": [\"N/A\"], \"kav_dc_product\": [\".NET Search Interface\"], \"ka_coveo_record_size\": [2], \"kav_dc_expanded_article_type\": [\"All;All|Product Issue\"], \"kav_datacategoryselections.coveo_record_size\": [\"2;2\"], \"concepts\": [\"config file ; Coveo Front-End ; IIS ; server ; scheme ; vice versa ; missing ; Usually ; assumedHttpRequestUrlScheme ; connection ; validation\"], \"sfkbid\": [\"kA13200000006uvCAA\"], \"kav_firstpublisheddate\": [1497373132], \"coveo_organization_id\": [\"00D3000000007r2\"], \"coveo_foldingcollection\": [\"fc4465dd089f0a9ff058510c640d2c1f4a50d5cf84f82392b60a44aafbfe\"], \"sffirstpublisheddate\": [1497373132], \"sflastmodifieddate\": [1497373132], \"kav_coveo_version__c\": [\".NET Search Interface\"], \"kav_vendor_version__c__html_stripped\": [\"\"], \"detectedlanguage\": [1], \"kav_isvisibleinprm\": [true], \"kav_owner.attribute.type\": [\"Name\"], \"kav_lastmodifiedby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000002MKBSAA4\"], \"sfversionc\": [\"Coveo .NET Front-End\"], \"sitename\": [\"Community\"], \"kav_createdby.name\": [\"Karel Mpungi\"], \"sfarticlenumber\": [\"000001277\"], \"kav_lastmodifiedby.coveo_record_size\": [2], \"sfisvisibleinpkb\": [true], \"kav_datacategoryselections.id\": [\"02o320000003sLWAAY;02o320000003sLVAAY\"], \"kav_description__c\": [\"This article explains how to fix the\\u00a0Error: Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\"], \"kav_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__kav/ka1320000000CyTAAU\"], \"kav_articlenumber__stripped\": [\"1277\"], \"sfversionnumber\": [1], \"kav_attribute.type\": [\"KB_Article__kav\"], \"kav_validationstatus\": [\"Approved\"], \"coveo_foldingparent\": [\"25d445d65f7401eb0994f4858365e52457971a879ab634a9b0425b0148ef\"], \"collection\": [\"default\"], \"sfsourceid\": [\"5003200000wlzy8AAA\"], \"date\": [1509619413], \"kav_lastmodifiedby.id\": [\"00560000002MKBSAA4\"], \"kav_datacategoryselections.datacategorygroupname\": [\"Product;Article_Type\"], \"conversionstate\": [0], \"sfvalidationstatus\": [\"Approved\"], \"kav_isdeleted\": [false], \"sflastmodifiedbyid\": [\"00560000002MKBSAA4\"], \"kav_lastmodifiedby.name\": [\"Karel Mpungi\"], \"kav_articlenumber\": [\"000001277\"], \"permanentid\": [\"eba727765f04e71caa2233e73b90d7bba72853554532827bfedf00d8ff6e\"]}",
      "sfbuildc" : "1376 or later",
      "sflastmodifiedbyid" : "00560000002MKBSAA4",
      "sfproductc" : ".NET Search Interface",
      "syssfownerid" : "00560000002MKBSAA4",
      "sfsitecoreversionc" : "N/A",
      "sourcetype" : "Salesforce",
      "sysconnectortype" : "Salesforce2",
      "sftitle" : "Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity",
      "rowid" : 5492780,
      "syssfcreatedbyid" : "00560000002MKBSAA4",
      "sfdescriptionc" : "This article explains how to fix the Error: Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity",
      "size" : 14079,
      "sfislatestversion" : "true",
      "sysdocumenttype" : "article",
      "sfcreateddate" : 1458912061000,
      "sfsourceid" : "5003200000wlzy8AAA",
      "clickableuri" : "https://na61.salesforce.com/kA13200000006uv",
      "syssource" : "Salesforce Public Items",
      "sfownerid" : "00560000002MKBSAA4",
      "orderingid" : 212384990660371587,
      "sfpublishstatus" : "Online",
      "syssize" : 14079,
      "sysdate" : 1509619413000,
      "sflanguage" : "en_US",
      "sysparents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity\" uri=\"https://na61.salesforce.com/kA13200000006uv\" /></parents>",
      "sfdcexpandedarticletype" : "All;All|Product Issue",
      "sfcurrencyisocode" : "USD",
      "sfkbid" : "kA13200000006uvCAA",
      "sfcausec" : "Starting with Coveo .NET Front-End 12.0.1376+ (December 2015), HTTP redirection loop is supported.Before,only HTTPS redirection loop was supported, and now HTTP redirection loop is supported as well.<br><br>Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is accessed through an HTTP connection instead of HTTPS or vice versa you&#39;ll get the following error:<br><br>Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity. at ASP._layouts_ces_claimsidentityprovider_aspx.__Render__control1(HtmlTextWriter __w, Control parameterContainer) when trying to access to their search interface page.<br> ",
      "sfdcexpandedproduct" : "All;All|.NET Search Interface",
      "syssfcreateddate" : 1458912061000,
      "sflastmodifieddate" : 1497373132000,
      "sfisvisibleinpkb" : "true",
      "source" : "Salesforce Public Items",
      "sfarticletypec" : "How To",
      "sfisdeleted" : "false",
      "sfisvisibleincsp" : "true",
      "sfvalidationstatus" : "Approved",
      "sflastmodifiedbyname" : "Karel Mpungi",
      "collection" : "default",
      "sfdcproduct" : [ ".NET Search Interface" ],
      "syssourcetype" : "Salesforce",
      "sfarticletype" : "KB_Article__kav",
      "indexeddate" : 1518187564000,
      "connectortype" : "Salesforce2",
      "filetype" : "SalesforceItem",
      "sfcreatedbyname" : "Karel Mpungi",
      "sysclickableuri" : "https://na61.salesforce.com/kA13200000006uv",
      "sysfiletype" : "SalesforceItem",
      "language" : [ "English" ],
      "sffirstpublisheddate" : 1497373132000,
      "sfownername" : "Karel Mpungi",
      "sitename" : "Community",
      "sysrowid" : 5492780,
      "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
      "syscollection" : "default"
    },
    "Title" : "Coveo.CES.Web.Search.Security.ClaimsIdentityException: Attempt to retrieve a token in HTTP without supplying the main identity",
    "Uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
    "PrintableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
    "ClickUri" : "https://na61.salesforce.com/kA13200000006uv",
    "UniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA13200000006uvCAA/language:en_US",
    "Excerpt" : "Both cannot be mixed in the same setup (HTTP in one direction, but HTTPS in the other). ... When that validation is failing because IIS wrongly tells to the Coveo .NET UI that the Coveo page is acc...",
    "FirstSentences" : null
  }