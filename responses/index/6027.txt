{
    "title" : "Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch",
    "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
    "printableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
    "clickUri" : "https://na61.salesforce.com/kA10d0000004Mxy",
    "uniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
    "excerpt" : "After following the ITD implementation doc in your insight panel you will notice that you can't activate it in your full search even with the case context. ... This will cause a mismatch of the sea...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1435,
    "percentScore" : 85.2398,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch",
      "sfsummary" : "After following the ITD implementation doc in your insight panel you will notice that you can't activate it in your full search even with the case context.",
      "sysurihash" : "NSGR9XCaMyITfE8W",
      "urihash" : "NSGR9XCaMyITfE8W",
      "parents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch\" uri=\"https://na61.salesforce.com/kA10d0000004Mxy\" /></parents>",
      "sfdcarticletype" : "Problem/Fix",
      "sfresolutionc" : "<p>First to activate the ITD in the full search you will need some development skills.<br><br>1) In your visual force page you will need to add this code : </p>\n\n<pre class=\"ckeditor_codeblock\">\nsearchInterface.on(&#39;buildingQuery&#39;, function (e, args) { \nif (Coveo.state(document.querySelector(&#39;.CoveoHiddenQuery&#39;)).attributes.hq) { \nargs.queryBuilder.longQueryExpression.add(&#39;{!JSENCODE(currentCase.Subject)} {!JSENCODE(currentCase.Description)}&#39;); \n} \n}</pre>\n \n\n<p>This will create the LQ in the full search if the case context is present and will send the Subject and Description of the current case.</p>\n\n<p> 2) In your search controller (the apex class) you will need to add this code :</p>\n\n<pre class=\"ckeditor_codeblock\">\nprivate id CaseId_2; \nprivate String CaseNumber; \nprivate Case CurrentCase; \nprivate Map&lt;String, String&gt; contextInfo = new Map&lt;String, String&gt;(); \npublic id getCaseId(){ return CaseId; } \npublic Case getCurrentCase(){return CurrentCase;} \n//public String getCaseNumber(){ return CaseNumber; }\n\npublic CoveoCasePanelController(){ \nif(ApexPages.currentPage().getParameters().get(&#39;caseId&#39;) != null) { \nCaseId_2 = ApexPages.currentPage().getParameters().get(&#39;caseId&#39;); \nCase c = [SELECT Id, CaseNumber, Subject, Description, Origin, Status FROM Case WHERE Id = :CaseId_2 ]; \nCurrentCase = c; \n} \n}</pre>\n \n\n<p>This will give you access to the data of the current case.</p>\n\n<p>Once this is done make sure the insight panel and full search use the same field to send in the LQ.<br>You still might have a mismatch and this is probably due to both search having different relevance tuning model so both model/pipeline won&#39;t learn the same thing. </p>",
      "sysuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
      "sysprintableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
      "sflastpublisheddate" : 1514990850000,
      "systransactionid" : 161139,
      "sfurlname" : "2928",
      "sfsystemmodstamp" : 1518004058000,
      "sfisvisibleinapp" : "true",
      "sfcoveoversionc" : "Coveo for Salesforce",
      "sysconcepts" : "insight panel ; pipeline ; relevance ; mismatch ; ITD ; skills ; query ; context ; tuning model ; apex class ; visual force ; implementation doc ; Resolution",
      "sfkbversionnumber" : "1",
      "concepts" : "insight panel ; pipeline ; relevance ; mismatch ; ITD ; skills ; query ; context ; tuning model ; apex class ; visual force ; implementation doc ; Resolution",
      "printableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
      "documenttype" : "article",
      "sfkbarticlekavid" : "ka10d0000004UJbAAM",
      "sysindexeddate" : 1518187600000,
      "sfknowledgearticleid" : "kA10d0000004MxyCAE",
      "sfcreatedbyid" : "00532000004voF1AAI",
      "sfconnectorc" : "N/A",
      "permanentid" : "68bcd010a23fff4e651cf4386e1b7455fd136406731a134f4c824e04012f",
      "syslanguage" : [ "English" ],
      "transactionid" : 161139,
      "sfisvisibleinprm" : "true",
      "title" : "Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch",
      "sfversionnumber" : 1,
      "sfarticlenumber" : "000002928",
      "date" : 1518004058000,
      "objecttype" : "KB Article",
      "allmetadatavalues" : "{\"kav_lastmodifiedby.attribute.type\": [\"User\"], \"coveo_short_id\": [\"kA10d0000004Mxy\"], \"sflastmodifiedbyname\": [\"Bruno-Pascal Roy-Dumas\"], \"kav_coveo_version__c__html_stripped\": [\"Coveo for Salesforce\"], \"fileextension\": [\"\"], \"sfdcexpandedproduct\": [\"All;All|Salesforce\"], \"kav_createdby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00532000004voF1AAI\"], \"sflanguage\": [\"en_US\"], \"kav_createdby.attribute.type\": [\"User\"], \"kav_createdby.id\": [\"00532000004voF1AAI\"], \"kav_language\": [\"en_US\"], \"sfsitecoreversionc\": [\"N/A\"], \"sourcetype\": [\"Salesforce\"], \"title\": [\"Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch\"], \"source\": [\"Salesforce Public Items\"], \"kav_owner.attribute.url\": [\"/services/data/v34.0/sobjects/User/00532000004voF1AAI\"], \"parents\": [\"<?xml version=\\\"1.0\\\" encoding=\\\"utf-16\\\"?><parents><parent name=\\\"Organization\\\" uri=\\\"https://na61.salesforce.com/home/home.jsp\\\" /><parent name=\\\"KB_Article__ka\\\" uri=\\\"http://www.salesforce.com/org:organization/articletype:KB_Article\\\" /><parent name=\\\"Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch\\\" uri=\\\"https://na61.salesforce.com/kA10d0000004Mxy\\\" /></parents>\"], \"sfisvisibleinprm\": [true], \"kav_title\": [\"Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch\"], \"kav_isvisibleincsp\": [true], \"sfcreateddate\": [1514989268], \"hashtmlversion\": [true], \"kav_versionnumber\": [1], \"sfcreatedbyname\": [\"Bruno-Pascal Roy-Dumas\"], \"sflastpublisheddate\": [1514990850], \"objecttypelabel\": [\"KB Article\"], \"kav_cause__c__html_stripped\": [\"ITD can only be initiated in the full search following some code change so code skill required. \\n \\n The mismatch that will happen once it is activated is\\n \\n\\n 1) You won't have the same pipeline in insight panel and full search so you won't have the same relevance tuning model and they won't learn the same thing. \\n \\n 2) Be sure that what is send to Coveo in your LQ does match is you only send the subject in the insight panel and send only the description in your full search you won't have the same results.\\n\"], \"originalhtmlcharset\": [1200], \"coveo_connector_hasbinarydata\": [false], \"kav_lastpublisheddate\": [1514990850], \"sfsystemmodstamp\": [1518004058], \"ka_attribute.type\": [\"KB_Article__ka\"], \"sfdcproduct\": [\"Salesforce\"], \"kav_resolution__c__html_stripped\": [\"First to activate the ITD in the full search you will need some development skills. \\n \\n 1) In your visual force page you will need to add this code :\\u00a0\\n \\n\\n \\nsearchInterface.on('buildingQuery', function (e, args) { \\nif (Coveo.state(document.querySelector('.CoveoHiddenQuery')).attributes.hq) { \\nargs.queryBuilder.longQueryExpression.add('{!JSENCODE(currentCase.Subject)} {!JSENCODE(currentCase.Description)}'); \\n} \\n} \\n\\u00a0\\n\\n This will create the LQ in the full search if the case context is present and will send the Subject and Description of the current case.\\n \\n\\n \\u00a02) In your search controller (the apex class) you will need to add this code :\\n \\n\\n \\nprivate id CaseId_2; \\nprivate String CaseNumber; \\nprivate Case CurrentCase; \\nprivate Map<String, String> contextInfo = new Map<String, String>(); \\npublic id getCaseId(){ return CaseId; } \\npublic Case getCurrentCase(){return CurrentCase;} \\n//public String getCaseNumber(){ return CaseNumber; }\\n\\npublic CoveoCasePanelController(){ \\nif(ApexPages.currentPage().getParameters().get('caseId') != null) { \\nCaseId_2 = ApexPages.currentPage().getParameters().get('caseId'); \\nCase c = [SELECT Id, CaseNumber, Subject, Description, Origin, Status FROM Case WHERE Id = :CaseId_2 ]; \\nCurrentCase = c; \\n} \\n} \\n\\u00a0\\n\\n This will give you access to the data of the current case.\\n \\n\\n Once this is done make sure the insight panel and full search use the same field to send in the LQ. \\n You still might have a mismatch and this is probably due to both search having different relevance tuning model so both model/pipeline won't learn the same thing.\\u00a0\\n\"], \"clickableuri\": [\"https://na61.salesforce.com/kA10d0000004Mxy\"], \"sftitle\": [\"Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch\"], \"kav_owner.id\": [\"00532000004voF1AAI\"], \"sfisvisibleinapp\": [true], \"ka_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__ka/kA10d0000004MxyCAE\"], \"sfdcarticletype\": [\"Problem/Fix\"], \"kav_cause__c\": [\"<p>ITD can only be initiated in the full search following some code change so code skill required.<br><br>The mismatch that will happen once it is activated is</p>\\n\\n<p>1) You won&#39;t have the same pipeline in insight panel and full search so you won&#39;t have the same relevance tuning model and they won&#39;t learn the same thing.<br><br>2) Be sure that what is send to Coveo in your LQ does match is you only send the subject in the insight panel and send only the description in your full search you won&#39;t have the same results.</p>\"], \"sfislatestversion\": [true], \"sfcausec\": [\"<p>ITD can only be initiated in the full search following some code change so code skill required.<br><br>The mismatch that will happen once it is activated is</p>\\n\\n<p>1) You won&#39;t have the same pipeline in insight panel and full search so you won&#39;t have the same relevance tuning model and they won&#39;t learn the same thing.<br><br>2) Be sure that what is send to Coveo in your LQ does match is you only send the subject in the insight panel and send only the description in your full search you won&#39;t have the same results.</p>\"], \"contenttype\": [\"binarydata\"], \"sfurlname\": [\"2928\"], \"ka_id\": [\"kA10d0000004MxyCAE\"], \"kav_datacategoryselections.datacategoryname\": [\"Salesforce;Configuration\"], \"coveo_url\": [\"https://na61.salesforce.com/kA10d0000004Mxy\"], \"kav_urlname\": [\"2928\"], \"kav_dc_expanded_product\": [\"All;All|Salesforce\"], \"foldingcollection\": [\"b862f23741871cdeb6def5b9ffa301b4556ff6a1fe3555009b83efd85a5b\"], \"body\": [\"<html>   <body>     <div style=\\\"background-color: #fff;border: 2px solid #BBC5CC;border-radius: 4px;float: left;font-family: lato;margin-left: 15px;margin-right: 15px;margin-bottom: 4%;padding: 10px;width: 60%;\\\">       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Description         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> After following the <a href=\\\"https://developers.coveo.com/display/public/SalesforceV2/Activating+Machine+Learning+Intelligent+Term+Detection+%28ITD%29+in+Salesforce\\\" target=\\\"_blank\\\">ITD implementation</a> doc in your insight panel you will notice that you can&#39;t activate it in your full search even with the case context. This will cause a mismatch of the search result as the insight panel will launch a query with the LQ that is analyze by the relevance tuning of the pipeline and the full search will only launch a normal query.</div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Environment         </div>       </div>       <br/>       <table>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Product</td>           <td></td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Sitecore Version</td>           <td>N/A</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Connector</td>           <td>N/A</td>         </tr>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Published</td>           <td>1514990850</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Version</td>           <td></td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Build</td>           <td></td>         </tr>       </table>       <br/>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Cause         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> <p>ITD can only be initiated in the full search following some code change so code skill required.<br><br>The mismatch that will happen once it is activated is</p>\\n\\n<p>1) You won&#39;t have the same pipeline in insight panel and full search so you won&#39;t have the same relevance tuning model and they won&#39;t learn the same thing.<br><br>2) Be sure that what is send to Coveo in your LQ does match is you only send the subject in the insight panel and send only the description in your full search you won&#39;t have the same results.</p></div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Resolution         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> <p>First to activate the ITD in the full search you will need some development skills.<br><br>1) In your visual force page you will need to add this code :\\u00a0</p>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nsearchInterface.on(&#39;buildingQuery&#39;, function (e, args) { \\nif (Coveo.state(document.querySelector(&#39;.CoveoHiddenQuery&#39;)).attributes.hq) { \\nargs.queryBuilder.longQueryExpression.add(&#39;{!JSENCODE(currentCase.Subject)} {!JSENCODE(currentCase.Description)}&#39;); \\n} \\n}</pre>\\n\\u00a0\\n\\n<p>This will create the LQ in the full search if the case context is present and will send the Subject and Description of the current case.</p>\\n\\n<p>\\u00a02) In your search controller (the apex class) you will need to add this code :</p>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nprivate id CaseId_2; \\nprivate String CaseNumber; \\nprivate Case CurrentCase; \\nprivate Map&lt;String, String&gt; contextInfo = new Map&lt;String, String&gt;(); \\npublic id getCaseId(){ return CaseId; } \\npublic Case getCurrentCase(){return CurrentCase;} \\n//public String getCaseNumber(){ return CaseNumber; }\\n\\npublic CoveoCasePanelController(){ \\nif(ApexPages.currentPage().getParameters().get(&#39;caseId&#39;) != null) { \\nCaseId_2 = ApexPages.currentPage().getParameters().get(&#39;caseId&#39;); \\nCase c = [SELECT Id, CaseNumber, Subject, Description, Origin, Status FROM Case WHERE Id = :CaseId_2 ]; \\nCurrentCase = c; \\n} \\n}</pre>\\n\\u00a0\\n\\n<p>This will give you access to the data of the current case.</p>\\n\\n<p>Once this is done make sure the insight panel and full search use the same field to send in the LQ.<br>You still might have a mismatch and this is probably due to both search having different relevance tuning model so both model/pipeline won&#39;t learn the same thing.\\u00a0</p></div>     </div>   </body> </html>\"], \"sfpublishstatus\": [\"Online\"], \"sfcreatedbyid\": [\"00532000004voF1AAI\"], \"kav_description__c__html_stripped\": [\"After following the  ITD implementation  doc in your insight panel you will notice that you can't activate it in your full search even with the case context. This will cause a mismatch of the search result as the insight panel will launch a query with the LQ that is analyze by the relevance tuning of the pipeline and the full search will only launch a normal query.\"], \"kav_islatestversion\": [true], \"kav_knowledgearticleid\": [\"kA10d0000004MxyCAE\"], \"sfknowledgearticleid\": [\"kA10d0000004MxyCAE\"], \"sfownername\": [\"Bruno-Pascal Roy-Dumas\"], \"kav_datacategoryselections.attribute.type\": [\"KB_Article__DataCategorySelection;KB_Article__DataCategorySelection\"], \"detectedtitle\": [\"Description\"], \"kav_createddate\": [1514989268], \"language\": [\"English\"], \"coveo_foldingchild\": [\"52caeac4d051d965a9d08e19292b67c9306ce1dd1aed28954ceb7cf72bdf\"], \"sfownerid\": [\"00532000004voF1AAI\"], \"kav_createdby.coveo_record_size\": [2], \"kav_systemmodstamp\": [1518004058], \"objecttype\": [\"KB Article\"], \"connectortype\": [\"Salesforce2\"], \"kav_coveo_record_size\": [4], \"originaluri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US\"], \"sfisvisibleincsp\": [true], \"convertertype\": [\"TYPE_HTML\"], \"filetype\": [\"SalesforceItem\"], \"kav_owner.name\": [\"Bruno-Pascal Roy-Dumas\"], \"sfcoveoversionc\": [\"Coveo for Salesforce\"], \"sfdcexpandedarticletype\": [\"All;All|Problem/Fix\"], \"objecttypelabelplural\": [\"KB Articles\"], \"sfcurrencyisocode\": [\"CAD\"], \"sfisdeleted\": [false], \"extractedsize\": [5100], \"size\": [8097], \"kav_summary\": [\"After following the ITD implementation doc in your insight panel you will notice that you can't activate it in your full search even with the case context.\"], \"kav_publishstatus\": [\"Online\"], \"kav_connector__c\": [\"N/A\"], \"generateexcerpt\": [true], \"sfdescriptionc\": [\"After following the <a href=\\\"https://developers.coveo.com/display/public/SalesforceV2/Activating+Machine+Learning+Intelligent+Term+Detection+%28ITD%29+in+Salesforce\\\" target=\\\"_blank\\\">ITD implementation</a> doc in your insight panel you will notice that you can&#39;t activate it in your full search even with the case context. This will cause a mismatch of the search result as the insight panel will launch a query with the LQ that is analyze by the relevance tuning of the pipeline and the full search will only launch a normal query.\"], \"sfarticletype\": [\"KB_Article__kav\"], \"kav_lastmodifieddate\": [1514990850], \"documenttype\": [\"article\"], \"sfkbarticlekavid\": [\"ka10d0000004UJbAAM\"], \"kav_currencyisocode\": [\"CAD\"], \"foldingparent\": [\"52caeac4d051d965a9d08e19292b67c9306ce1dd1aed28954ceb7cf72bdf\"], \"mappingtype\": [\"KB_Article\"], \"kav_isvisibleinpkb\": [true], \"kav_sourceid\": [\"5000d00001Ga0FSAAZ\"], \"sfkbversionnumber\": [1], \"kav_isvisibleinapp\": [true], \"kav_resolution__c\": [\"<p>First to activate the ITD in the full search you will need some development skills.<br><br>1) In your visual force page you will need to add this code :\\u00a0</p>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nsearchInterface.on(&#39;buildingQuery&#39;, function (e, args) { \\nif (Coveo.state(document.querySelector(&#39;.CoveoHiddenQuery&#39;)).attributes.hq) { \\nargs.queryBuilder.longQueryExpression.add(&#39;{!JSENCODE(currentCase.Subject)} {!JSENCODE(currentCase.Description)}&#39;); \\n} \\n}</pre>\\n\\u00a0\\n\\n<p>This will create the LQ in the full search if the case context is present and will send the Subject and Description of the current case.</p>\\n\\n<p>\\u00a02) In your search controller (the apex class) you will need to add this code :</p>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nprivate id CaseId_2; \\nprivate String CaseNumber; \\nprivate Case CurrentCase; \\nprivate Map&lt;String, String&gt; contextInfo = new Map&lt;String, String&gt;(); \\npublic id getCaseId(){ return CaseId; } \\npublic Case getCurrentCase(){return CurrentCase;} \\n//public String getCaseNumber(){ return CaseNumber; }\\n\\npublic CoveoCasePanelController(){ \\nif(ApexPages.currentPage().getParameters().get(&#39;caseId&#39;) != null) { \\nCaseId_2 = ApexPages.currentPage().getParameters().get(&#39;caseId&#39;); \\nCase c = [SELECT Id, CaseNumber, Subject, Description, Origin, Status FROM Case WHERE Id = :CaseId_2 ]; \\nCurrentCase = c; \\n} \\n}</pre>\\n\\u00a0\\n\\n<p>This will give you access to the data of the current case.</p>\\n\\n<p>Once this is done make sure the insight panel and full search use the same field to send in the LQ.<br>You still might have a mismatch and this is probably due to both search having different relevance tuning model so both model/pipeline won&#39;t learn the same thing.\\u00a0</p>\"], \"coveo_objecttype\": [\"KB_Article\"], \"printableuri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US\"], \"kav_datacategoryselections.attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o0d000000mAfIAAU;/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o0d000000mAfHAAU\"], \"kav_id\": [\"ka10d0000004UJbAAM\"], \"sfresolutionc\": [\"<p>First to activate the ITD in the full search you will need some development skills.<br><br>1) In your visual force page you will need to add this code :\\u00a0</p>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nsearchInterface.on(&#39;buildingQuery&#39;, function (e, args) { \\nif (Coveo.state(document.querySelector(&#39;.CoveoHiddenQuery&#39;)).attributes.hq) { \\nargs.queryBuilder.longQueryExpression.add(&#39;{!JSENCODE(currentCase.Subject)} {!JSENCODE(currentCase.Description)}&#39;); \\n} \\n}</pre>\\n\\u00a0\\n\\n<p>This will create the LQ in the full search if the case context is present and will send the Subject and Description of the current case.</p>\\n\\n<p>\\u00a02) In your search controller (the apex class) you will need to add this code :</p>\\n\\n<pre class=\\\"ckeditor_codeblock\\\">\\nprivate id CaseId_2; \\nprivate String CaseNumber; \\nprivate Case CurrentCase; \\nprivate Map&lt;String, String&gt; contextInfo = new Map&lt;String, String&gt;(); \\npublic id getCaseId(){ return CaseId; } \\npublic Case getCurrentCase(){return CurrentCase;} \\n//public String getCaseNumber(){ return CaseNumber; }\\n\\npublic CoveoCasePanelController(){ \\nif(ApexPages.currentPage().getParameters().get(&#39;caseId&#39;) != null) { \\nCaseId_2 = ApexPages.currentPage().getParameters().get(&#39;caseId&#39;); \\nCase c = [SELECT Id, CaseNumber, Subject, Description, Origin, Status FROM Case WHERE Id = :CaseId_2 ]; \\nCurrentCase = c; \\n} \\n}</pre>\\n\\u00a0\\n\\n<p>This will give you access to the data of the current case.</p>\\n\\n<p>Once this is done make sure the insight panel and full search use the same field to send in the LQ.<br>You still might have a mismatch and this is probably due to both search having different relevance tuning model so both model/pipeline won&#39;t learn the same thing.\\u00a0</p>\"], \"foldingchild\": [\"52caeac4d051d965a9d08e19292b67c9306ce1dd1aed28954ceb7cf72bdf\"], \"sfsummary\": [\"After following the ITD implementation doc in your insight panel you will notice that you can't activate it in your full search even with the case context.\"], \"kav_sitecore_version__c\": [\"N/A\"], \"kav_owner.coveo_record_size\": [2], \"kav_coveo_effective_modstamp\": [1518004058], \"kav_summary__html_stripped\": [\"After following the ITD implementation doc in your insight panel you will notice that you can't activate it in your full search even with the case context.\"], \"kav_dc_article_type\": [\"Problem/Fix\"], \"sfconnectorc\": [\"N/A\"], \"kav_dc_product\": [\"Salesforce\"], \"ka_coveo_record_size\": [2], \"kav_dc_expanded_article_type\": [\"All;All|Problem/Fix\"], \"kav_datacategoryselections.coveo_record_size\": [\"2;2\"], \"concepts\": [\"insight panel ; pipeline ; relevance ; mismatch ; ITD ; skills ; query ; context ; tuning model ; apex class ; visual force ; implementation doc ; Resolution\"], \"sfkbid\": [\"kA10d0000004MxyCAE\"], \"kav_firstpublisheddate\": [1514990850], \"coveo_organization_id\": [\"00D3000000007r2\"], \"coveo_foldingcollection\": [\"b862f23741871cdeb6def5b9ffa301b4556ff6a1fe3555009b83efd85a5b\"], \"sffirstpublisheddate\": [1514990850], \"sflastmodifieddate\": [1514990850], \"kav_coveo_version__c\": [\"Coveo for Salesforce\"], \"kav_vendor_version__c__html_stripped\": [\"\"], \"detectedlanguage\": [1], \"kav_isvisibleinprm\": [true], \"kav_owner.attribute.type\": [\"Name\"], \"kav_lastmodifiedby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00532000004voF1AAI\"], \"sitename\": [\"Community\"], \"kav_createdby.name\": [\"Bruno-Pascal Roy-Dumas\"], \"sfarticlenumber\": [\"000002928\"], \"kav_lastmodifiedby.coveo_record_size\": [2], \"sfisvisibleinpkb\": [true], \"kav_datacategoryselections.id\": [\"02o0d000000mAfIAAU;02o0d000000mAfHAAU\"], \"kav_description__c\": [\"After following the <a href=\\\"https://developers.coveo.com/display/public/SalesforceV2/Activating+Machine+Learning+Intelligent+Term+Detection+%28ITD%29+in+Salesforce\\\" target=\\\"_blank\\\">ITD implementation</a> doc in your insight panel you will notice that you can&#39;t activate it in your full search even with the case context. This will cause a mismatch of the search result as the insight panel will launch a query with the LQ that is analyze by the relevance tuning of the pipeline and the full search will only launch a normal query.\"], \"kav_validationstatus\": [\"Reviewed\"], \"kav_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__kav/ka10d0000004UJbAAM\"], \"kav_articlenumber__stripped\": [\"2928\"], \"sfversionnumber\": [1], \"kav_attribute.type\": [\"KB_Article__kav\"], \"kav_articletype\": [\"KB_Article__kav\"], \"coveo_foldingparent\": [\"52caeac4d051d965a9d08e19292b67c9306ce1dd1aed28954ceb7cf72bdf\"], \"collection\": [\"default\"], \"sfsourceid\": [\"5000d00001Ga0FSAAZ\"], \"date\": [1518004058], \"kav_lastmodifiedby.id\": [\"00532000004voF1AAI\"], \"kav_datacategoryselections.datacategorygroupname\": [\"Product;Article_Type\"], \"conversionstate\": [0], \"sfvalidationstatus\": [\"Reviewed\"], \"kav_isdeleted\": [false], \"sflastmodifiedbyid\": [\"00532000004voF1AAI\"], \"kav_lastmodifiedby.name\": [\"Bruno-Pascal Roy-Dumas\"], \"kav_articlenumber\": [\"000002928\"], \"permanentid\": [\"68bcd010a23fff4e651cf4386e1b7455fd136406731a134f4c824e04012f\"]}",
      "sflastmodifiedbyid" : "00532000004voF1AAI",
      "syssfownerid" : "00532000004voF1AAI",
      "sfsitecoreversionc" : "N/A",
      "sourcetype" : "Salesforce",
      "sysconnectortype" : "Salesforce2",
      "sftitle" : "Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch",
      "rowid" : 5493337,
      "syssfcreatedbyid" : "00532000004voF1AAI",
      "sfdescriptionc" : "After following the <a href=\"https://developers.coveo.com/display/public/SalesforceV2/Activating+Machine+Learning+Intelligent+Term+Detection+%28ITD%29+in+Salesforce\" target=\"_blank\">ITD implementation</a> doc in your insight panel you will notice that you can&#39;t activate it in your full search even with the case context. This will cause a mismatch of the search result as the insight panel will launch a query with the LQ that is analyze by the relevance tuning of the pipeline and the full search will only launch a normal query.",
      "size" : 8097,
      "sfislatestversion" : "true",
      "sysdocumenttype" : "article",
      "sfcreateddate" : 1514989268000,
      "sfsourceid" : "5000d00001Ga0FSAAZ",
      "clickableuri" : "https://na61.salesforce.com/kA10d0000004Mxy",
      "syssource" : "Salesforce Public Items",
      "sfownerid" : "00532000004voF1AAI",
      "orderingid" : 212384990660372141,
      "sfpublishstatus" : "Online",
      "syssize" : 8097,
      "sysdate" : 1518004058000,
      "sflanguage" : "en_US",
      "sysparents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch\" uri=\"https://na61.salesforce.com/kA10d0000004Mxy\" /></parents>",
      "sfdcexpandedarticletype" : "All;All|Problem/Fix",
      "sfcurrencyisocode" : "CAD",
      "sfkbid" : "kA10d0000004MxyCAE",
      "sfcausec" : "<p>ITD can only be initiated in the full search following some code change so code skill required.<br><br>The mismatch that will happen once it is activated is</p>\n\n<p>1) You won&#39;t have the same pipeline in insight panel and full search so you won&#39;t have the same relevance tuning model and they won&#39;t learn the same thing.<br><br>2) Be sure that what is send to Coveo in your LQ does match is you only send the subject in the insight panel and send only the description in your full search you won&#39;t have the same results.</p>",
      "sfdcexpandedproduct" : "All;All|Salesforce",
      "syssfcreateddate" : 1514989268000,
      "sflastmodifieddate" : 1514990850000,
      "sfisvisibleinpkb" : "true",
      "source" : "Salesforce Public Items",
      "sfisdeleted" : "false",
      "sfisvisibleincsp" : "true",
      "sfvalidationstatus" : "Reviewed",
      "sflastmodifiedbyname" : "Bruno-Pascal Roy-Dumas",
      "collection" : "default",
      "sfdcproduct" : [ "Salesforce" ],
      "syssourcetype" : "Salesforce",
      "sfarticletype" : "KB_Article__kav",
      "indexeddate" : 1518187600000,
      "connectortype" : "Salesforce2",
      "filetype" : "SalesforceItem",
      "sfcreatedbyname" : "Bruno-Pascal Roy-Dumas",
      "sysclickableuri" : "https://na61.salesforce.com/kA10d0000004Mxy",
      "sysfiletype" : "SalesforceItem",
      "language" : [ "English" ],
      "sffirstpublisheddate" : 1514990850000,
      "sfownername" : "Bruno-Pascal Roy-Dumas",
      "sitename" : "Community",
      "sysrowid" : 5493337,
      "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
      "syscollection" : "default"
    },
    "Title" : "Coveo Intelligent Term Detection causing mismatch between insight panel and full search with case context and how to activate the ITD in fullsearch",
    "Uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
    "PrintableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
    "ClickUri" : "https://na61.salesforce.com/kA10d0000004Mxy",
    "UniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d0000004MxyCAE/language:en_US",
    "Excerpt" : "After following the ITD implementation doc in your insight panel you will notice that you can't activate it in your full search even with the case context. ... This will cause a mismatch of the sea...",
    "FirstSentences" : null
  }