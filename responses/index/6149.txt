{
    "title" : "Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process",
    "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
    "printableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
    "clickUri" : "https://na61.salesforce.com/kA10d00000008cy",
    "uniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
    "excerpt" : "at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions() at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSec...",
    "firstSentences" : null,
    "summary" : null,
    "flags" : "HasHtmlVersion",
    "hasHtmlVersion" : true,
    "hasMobileHtmlVersion" : false,
    "score" : 1348,
    "percentScore" : 82.61547,
    "rankingInfo" : null,
    "rating" : 3.0,
    "isTopResult" : false,
    "isRecommendation" : false,
    "titleHighlights" : [ ],
    "firstSentencesHighlights" : [ ],
    "excerptHighlights" : [ ],
    "printableUriHighlights" : [ ],
    "summaryHighlights" : [ ],
    "parentResult" : null,
    "childResults" : [ ],
    "totalNumberOfChildResults" : 0,
    "raw" : {
      "systitle" : "Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process",
      "sysurihash" : "gKSZa0IlaðNqu0IU",
      "urihash" : "gKSZa0IlaðNqu0IU",
      "parents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process\" uri=\"https://na61.salesforce.com/kA10d00000008cy\" /></parents>",
      "sfdcarticletype" : "Problem/Fix",
      "sfresolutionc" : "You should open a support case with Sitecore and ask for a hot fix.<br><br>A viable workaround could be to empty Active Directory&#39;s recycle bin. This cannot be done through the GUI but can be achieved with this powershell command :<br> \n<pre class=\"ckeditor_codeblock\">\nGet-ADObject -Filter &#39;isDeleted -eq $true -and Name -like &quot;*DEL:*&quot;&#39; -IncludeDeletedObjects | Remove-ADObject -Confirm:$false</pre>\n<br> ",
      "sysuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
      "sysprintableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
      "sflastpublisheddate" : 1505503155000,
      "systransactionid" : 161139,
      "sfurlname" : "2529",
      "sfsystemmodstamp" : 1516534498000,
      "sfisvisibleinapp" : "true",
      "sfcoveoversionc" : "Sitecore",
      "sysconcepts" : "Active Directory ; bin ; Sitecore ; Context ; IProviderUpdateContext ; ProviderIndexBase ; PushAllSecurityEntityExpansions ; CloudPlatformCommunication ; powershell command ; viable workaround ; indexing process ; pushing identities ; PerformRebuild ; ExpandedPermissionsHandler ; SecurityProviderManagement",
      "sfkbversionnumber" : "1",
      "concepts" : "Active Directory ; bin ; Sitecore ; Context ; IProviderUpdateContext ; ProviderIndexBase ; PushAllSecurityEntityExpansions ; CloudPlatformCommunication ; powershell command ; viable workaround ; indexing process ; pushing identities ; PerformRebuild ; ExpandedPermissionsHandler ; SecurityProviderManagement",
      "printableuri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
      "documenttype" : "article",
      "sfkbarticlekavid" : "ka10d0000000HLRAA2",
      "sysindexeddate" : 1518187582000,
      "sfknowledgearticleid" : "kA10d00000008cyCAA",
      "sfcreatedbyid" : "00560000004BtvyAAC",
      "sfconnectorc" : "N/A",
      "permanentid" : "4a4a0ad26ed8108d856efccaf4a7f8af4696e7de9a42b82ae6fd4b9294be",
      "syslanguage" : [ "English" ],
      "transactionid" : 161139,
      "sfisvisibleinprm" : "true",
      "title" : "Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process",
      "sfversionnumber" : 1,
      "sfarticlenumber" : "000002529",
      "date" : 1516534498000,
      "objecttype" : "KB Article",
      "allmetadatavalues" : "{\"kav_lastmodifiedby.attribute.type\": [\"User\"], \"coveo_short_id\": [\"kA10d00000008cy\"], \"sflastmodifiedbyname\": [\"Karel Mpungi\"], \"kav_coveo_version__c__html_stripped\": [\"Sitecore\"], \"fileextension\": [\"\"], \"sfdcexpandedproduct\": [\"All;All|Sitecore\"], \"kav_createdby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000004BtvyAAC\"], \"sflanguage\": [\"en_US\"], \"kav_createdby.attribute.type\": [\"User\"], \"kav_createdby.id\": [\"00560000004BtvyAAC\"], \"kav_language\": [\"en_US\"], \"sfsitecoreversionc\": [\"N/A\"], \"sourcetype\": [\"Salesforce\"], \"title\": [\"Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process\"], \"source\": [\"Salesforce Public Items\"], \"kav_owner.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000004BtvyAAC\"], \"parents\": [\"<?xml version=\\\"1.0\\\" encoding=\\\"utf-16\\\"?><parents><parent name=\\\"Organization\\\" uri=\\\"https://na61.salesforce.com/home/home.jsp\\\" /><parent name=\\\"KB_Article__ka\\\" uri=\\\"http://www.salesforce.com/org:organization/articletype:KB_Article\\\" /><parent name=\\\"Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process\\\" uri=\\\"https://na61.salesforce.com/kA10d00000008cy\\\" /></parents>\"], \"sfisvisibleinprm\": [true], \"kav_title\": [\"Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process\"], \"kav_isvisibleincsp\": [true], \"hashtmlversion\": [true], \"kav_versionnumber\": [1], \"sfcreatedbyname\": [\"Benoit Garneau\"], \"sflastpublisheddate\": [1505503155], \"objecttypelabel\": [\"KB Article\"], \"kav_cause__c__html_stripped\": [\"This is caused by a bug within the Sitecore AD module (LightLDAP) \\n The module is pushing identities, even when they are in the recycle bin. \\n \\n This is breaking the indexing process within Coveo.\"], \"originalhtmlcharset\": [1200], \"coveo_connector_hasbinarydata\": [false], \"kav_lastpublisheddate\": [1505503155], \"sfsystemmodstamp\": [1516534498], \"ka_attribute.type\": [\"KB_Article__ka\"], \"sfdcproduct\": [\"Sitecore\"], \"sfvendorversionc\": [\"Sitecore\"], \"kav_resolution__c__html_stripped\": [\"You should open a support case with Sitecore and ask for a hot fix. \\n \\n A viable workaround could be to empty Active Directory's recycle bin. This cannot be done through the GUI but can be achieved with this powershell command : \\n \\u00a0\\n \\nGet-ADObject -Filter 'isDeleted -eq $true -and Name -like \\\"*DEL:*\\\"' -IncludeDeletedObjects | Remove-ADObject -Confirm:$false \\n \\n \\u00a0\"], \"clickableuri\": [\"https://na61.salesforce.com/kA10d00000008cy\"], \"sftitle\": [\"Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process\"], \"kav_owner.id\": [\"00560000004BtvyAAC\"], \"sfisvisibleinapp\": [true], \"ka_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__ka/kA10d00000008cyCAA\"], \"sfdcarticletype\": [\"Problem/Fix\"], \"kav_cause__c\": [\"This is caused by a bug within the Sitecore AD module (LightLDAP)<br>The module is pushing identities, even when they are in the recycle bin.<br><br>This is breaking the indexing process within Coveo.\"], \"sfislatestversion\": [true], \"sfcausec\": [\"This is caused by a bug within the Sitecore AD module (LightLDAP)<br>The module is pushing identities, even when they are in the recycle bin.<br><br>This is breaking the indexing process within Coveo.\"], \"contenttype\": [\"binarydata\"], \"sfurlname\": [\"2529\"], \"ka_id\": [\"kA10d00000008cyCAA\"], \"kav_datacategoryselections.datacategoryname\": [\"Configuration;Sitecore\"], \"coveo_url\": [\"https://na61.salesforce.com/kA10d00000008cy\"], \"kav_urlname\": [\"2529\"], \"kav_dc_expanded_product\": [\"All;All|Sitecore\"], \"foldingcollection\": [\"bcbedd0f9bf72cc2894f869fffc9ad7c0be9e3f6c2e81b25ab5d0901fa11\"], \"body\": [\"<html>   <body>     <div style=\\\"background-color: #fff;border: 2px solid #BBC5CC;border-radius: 4px;float: left;font-family: lato;margin-left: 15px;margin-right: 15px;margin-bottom: 4%;padding: 10px;width: 60%;\\\">       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Description         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> Rebuilding sources fail, raising a &quot;System.Configuration.Provider.ProviderException&quot; exception, stating that a role does not exist.\\n<pre class=\\\"ckeditor_codeblock\\\">\\nException: System.Configuration.Provider.ProviderException\\nMessage: The role [Deleted Role] doesn&#39;t exist.\\nSource: LightLDAP\\n\\u00a0 \\u00a0at LightLDAP.MembershipResolver.GetRoleMembers(String roleName, String userPattern, Boolean includeIndirectMembers, Boolean throwIfRoleNotExist)\\n\\u00a0 \\u00a0at LightLDAP.SitecoreADRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.SwitchingRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Data.DataProviders.NullRetryer.Execute[T](Func`1 action, Action recover)\\n\\u00a0 \\u00a0at System.Web.Security.Roles.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetUsersInRole(Role targetRole, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetRoleMembers(Role role, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.Framework.Security.RolesInRolesManagerWrapper.GetRoleMembers(IRole p_Role, Boolean p_IncludeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.ExpandRoleMembers(String p_RoleName)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.CreateExpandedSecurityEntity(String p_EntityName, String p_EntityType, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()\\n\\u00a0 \\u00a0at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.EntitiesToEntitySet(IList`1 p_Entities, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.&lt;&gt;c__DisplayClass46.&lt;PushAllDomainEntities&gt;b__45(List`1 entities)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.EmptyBuffer(Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.HandleElements(IEnumerable`1 p_Elements, Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomain(String p_DomainName, DomainSecurityEntities p_DomainSecurityEntities, SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomains(SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.PerformRebuild(IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.Rebuild(IndexingOptions p_IndexingOptions, IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndex.Rebuild()</pre>\\n<br>The role mentioned in the stack trace is in the Active Directory recycle bin.</div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Environment         </div>       </div>       <br/>       <table>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Product</td>           <td></td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Sitecore Version</td>           <td>N/A</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Connector</td>           <td>N/A</td>         </tr>         <tr>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Published</td>           <td>1505503155</td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Version</td>           <td></td>           <td style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;font-weight: 600;\\\">Build</td>           <td></td>         </tr>       </table>       <br/>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Cause         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> This is caused by a bug within the Sitecore AD module (LightLDAP)<br>The module is pushing identities, even when they are in the recycle bin.<br><br>This is breaking the indexing process within Coveo.</div>       <div style=\\\"font-size: 1.5em;font-weight: 600;Padding-top: 30px;border-bottom: 1px solid #BBC5CC;\\\">         <div style=\\\"border-left: 1px solid #BBC5CC;border-top: 1px solid #BBC5CC;color: #296896;padding: 10px;width: 15%;\\\">           Resolution         </div>       </div>       <div style=\\\"margin-left: 35px;margin-top: 10px;font-size: 1em;\\\"> You should open a support case with Sitecore and ask for a hot fix.<br><br>A viable workaround could be to empty Active Directory&#39;s recycle bin. This cannot be done through the GUI but can be achieved with this powershell command :<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\nGet-ADObject -Filter &#39;isDeleted -eq $true -and Name -like &quot;*DEL:*&quot;&#39; -IncludeDeletedObjects | Remove-ADObject -Confirm:$false</pre>\\n<br>\\u00a0</div>     </div>   </body> </html>\"], \"sfpublishstatus\": [\"Online\"], \"sfcreatedbyid\": [\"00560000004BtvyAAC\"], \"kav_description__c__html_stripped\": [\"Rebuilding sources fail, raising a \\\"System.Configuration.Provider.ProviderException\\\" exception, stating that a role does not exist.\\n \\nException: System.Configuration.Provider.ProviderException\\nMessage: The role [Deleted Role] doesn't exist.\\nSource: LightLDAP\\n\\u00a0 \\u00a0at LightLDAP.MembershipResolver.GetRoleMembers(String roleName, String userPattern, Boolean includeIndirectMembers, Boolean throwIfRoleNotExist)\\n\\u00a0 \\u00a0at LightLDAP.SitecoreADRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.SwitchingRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Data.DataProviders.NullRetryer.Execute[T](Func`1 action, Action recover)\\n\\u00a0 \\u00a0at System.Web.Security.Roles.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetUsersInRole(Role targetRole, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetRoleMembers(Role role, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.Framework.Security.RolesInRolesManagerWrapper.GetRoleMembers(IRole p_Role, Boolean p_IncludeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.ExpandRoleMembers(String p_RoleName)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.CreateExpandedSecurityEntity(String p_EntityName, String p_EntityType, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()\\n\\u00a0 \\u00a0at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.EntitiesToEntitySet(IList`1 p_Entities, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.<>c__DisplayClass46.<PushAllDomainEntities>b__45(List`1 entities)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.EmptyBuffer(Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.HandleElements(IEnumerable`1 p_Elements, Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomain(String p_DomainName, DomainSecurityEntities p_DomainSecurityEntities, SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomains(SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.PerformRebuild(IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.Rebuild(IndexingOptions p_IndexingOptions, IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndex.Rebuild() \\n \\n The role mentioned in the stack trace is in the Active Directory recycle bin.\"], \"kav_islatestversion\": [true], \"kav_knowledgearticleid\": [\"kA10d00000008cyCAA\"], \"sfknowledgearticleid\": [\"kA10d00000008cyCAA\"], \"sfownername\": [\"Benoit Garneau\"], \"kav_datacategoryselections.attribute.type\": [\"KB_Article__DataCategorySelection;KB_Article__DataCategorySelection\"], \"detectedtitle\": [\"Exception: System.Configuration.Provider.ProviderException\"], \"kav_createddate\": [1504012832], \"language\": [\"English\"], \"coveo_foldingchild\": [\"3e9ca4178db39eb92be9ff390138700f4fa40f76660aca5ebb2535f2cddd\"], \"sfownerid\": [\"00560000004BtvyAAC\"], \"kav_createdby.coveo_record_size\": [2], \"kav_vendor_version__c\": [\"Sitecore\"], \"kav_systemmodstamp\": [1516534498], \"objecttype\": [\"KB Article\"], \"connectortype\": [\"Salesforce2\"], \"kav_coveo_record_size\": [4], \"originaluri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US\"], \"sfisvisibleincsp\": [true], \"convertertype\": [\"TYPE_HTML\"], \"filetype\": [\"SalesforceItem\"], \"kav_owner.name\": [\"Benoit Garneau\"], \"sfcoveoversionc\": [\"Sitecore\"], \"sfdcexpandedarticletype\": [\"All;All|Problem/Fix\"], \"objecttypelabelplural\": [\"KB Articles\"], \"sfcurrencyisocode\": [\"USD\"], \"sfisdeleted\": [false], \"extractedsize\": [7386], \"size\": [9692], \"kav_publishstatus\": [\"Online\"], \"kav_connector__c\": [\"N/A\"], \"generateexcerpt\": [true], \"sfdescriptionc\": [\"Rebuilding sources fail, raising a &quot;System.Configuration.Provider.ProviderException&quot; exception, stating that a role does not exist.\\n<pre class=\\\"ckeditor_codeblock\\\">\\nException: System.Configuration.Provider.ProviderException\\nMessage: The role [Deleted Role] doesn&#39;t exist.\\nSource: LightLDAP\\n\\u00a0 \\u00a0at LightLDAP.MembershipResolver.GetRoleMembers(String roleName, String userPattern, Boolean includeIndirectMembers, Boolean throwIfRoleNotExist)\\n\\u00a0 \\u00a0at LightLDAP.SitecoreADRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.SwitchingRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Data.DataProviders.NullRetryer.Execute[T](Func`1 action, Action recover)\\n\\u00a0 \\u00a0at System.Web.Security.Roles.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetUsersInRole(Role targetRole, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetRoleMembers(Role role, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.Framework.Security.RolesInRolesManagerWrapper.GetRoleMembers(IRole p_Role, Boolean p_IncludeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.ExpandRoleMembers(String p_RoleName)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.CreateExpandedSecurityEntity(String p_EntityName, String p_EntityType, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()\\n\\u00a0 \\u00a0at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.EntitiesToEntitySet(IList`1 p_Entities, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.&lt;&gt;c__DisplayClass46.&lt;PushAllDomainEntities&gt;b__45(List`1 entities)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.EmptyBuffer(Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.HandleElements(IEnumerable`1 p_Elements, Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomain(String p_DomainName, DomainSecurityEntities p_DomainSecurityEntities, SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomains(SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.PerformRebuild(IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.Rebuild(IndexingOptions p_IndexingOptions, IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndex.Rebuild()</pre>\\n<br>The role mentioned in the stack trace is in the Active Directory recycle bin.\"], \"sfarticletype\": [\"KB_Article__kav\"], \"kav_articletype\": [\"KB_Article__kav\"], \"kav_lastmodifieddate\": [1505503155], \"documenttype\": [\"article\"], \"sfkbarticlekavid\": [\"ka10d0000000HLRAA2\"], \"kav_currencyisocode\": [\"USD\"], \"foldingparent\": [\"3e9ca4178db39eb92be9ff390138700f4fa40f76660aca5ebb2535f2cddd\"], \"mappingtype\": [\"KB_Article\"], \"kav_isvisibleinpkb\": [true], \"kav_sourceid\": [\"5000d00001EXMm7AAH\"], \"sfkbversionnumber\": [1], \"kav_isvisibleinapp\": [true], \"kav_resolution__c\": [\"You should open a support case with Sitecore and ask for a hot fix.<br><br>A viable workaround could be to empty Active Directory&#39;s recycle bin. This cannot be done through the GUI but can be achieved with this powershell command :<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\nGet-ADObject -Filter &#39;isDeleted -eq $true -and Name -like &quot;*DEL:*&quot;&#39; -IncludeDeletedObjects | Remove-ADObject -Confirm:$false</pre>\\n<br>\\u00a0\"], \"coveo_objecttype\": [\"KB_Article\"], \"printableuri\": [\"http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US\"], \"kav_datacategoryselections.attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o0d0000004nIWAAY;/services/data/v34.0/sobjects/KB_Article__DataCategorySelection/02o0d0000004nIVAAY\"], \"kav_id\": [\"ka10d0000000HLRAA2\"], \"sfresolutionc\": [\"You should open a support case with Sitecore and ask for a hot fix.<br><br>A viable workaround could be to empty Active Directory&#39;s recycle bin. This cannot be done through the GUI but can be achieved with this powershell command :<br>\\u00a0\\n<pre class=\\\"ckeditor_codeblock\\\">\\nGet-ADObject -Filter &#39;isDeleted -eq $true -and Name -like &quot;*DEL:*&quot;&#39; -IncludeDeletedObjects | Remove-ADObject -Confirm:$false</pre>\\n<br>\\u00a0\"], \"foldingchild\": [\"3e9ca4178db39eb92be9ff390138700f4fa40f76660aca5ebb2535f2cddd\"], \"sfcreateddate\": [1504012832], \"kav_sitecore_version__c\": [\"N/A\"], \"kav_owner.coveo_record_size\": [2], \"kav_coveo_effective_modstamp\": [1516534498], \"kav_summary__html_stripped\": [\"\"], \"kav_dc_article_type\": [\"Problem/Fix\"], \"sfconnectorc\": [\"N/A\"], \"kav_dc_product\": [\"Sitecore\"], \"ka_coveo_record_size\": [2], \"kav_dc_expanded_article_type\": [\"All;All|Problem/Fix\"], \"kav_datacategoryselections.coveo_record_size\": [\"2;2\"], \"concepts\": [\"Active Directory ; bin ; Sitecore ; Context ; IProviderUpdateContext ; ProviderIndexBase ; PushAllSecurityEntityExpansions ; CloudPlatformCommunication ; powershell command ; viable workaround ; indexing process ; pushing identities ; PerformRebuild ; ExpandedPermissionsHandler ; SecurityProviderManagement\"], \"sfkbid\": [\"kA10d00000008cyCAA\"], \"kav_firstpublisheddate\": [1505503155], \"coveo_organization_id\": [\"00D3000000007r2\"], \"coveo_foldingcollection\": [\"bcbedd0f9bf72cc2894f869fffc9ad7c0be9e3f6c2e81b25ab5d0901fa11\"], \"sffirstpublisheddate\": [1505503155], \"sflastmodifieddate\": [1505503155], \"kav_coveo_version__c\": [\"Sitecore\"], \"kav_vendor_version__c__html_stripped\": [\"Sitecore\"], \"detectedlanguage\": [1], \"kav_isvisibleinprm\": [true], \"kav_owner.attribute.type\": [\"Name\"], \"kav_lastmodifiedby.attribute.url\": [\"/services/data/v34.0/sobjects/User/00560000002MKBSAA4\"], \"sitename\": [\"Community\"], \"kav_createdby.name\": [\"Benoit Garneau\"], \"sfarticlenumber\": [\"000002529\"], \"kav_lastmodifiedby.coveo_record_size\": [2], \"sfisvisibleinpkb\": [true], \"kav_datacategoryselections.id\": [\"02o0d0000004nIWAAY;02o0d0000004nIVAAY\"], \"kav_description__c\": [\"Rebuilding sources fail, raising a &quot;System.Configuration.Provider.ProviderException&quot; exception, stating that a role does not exist.\\n<pre class=\\\"ckeditor_codeblock\\\">\\nException: System.Configuration.Provider.ProviderException\\nMessage: The role [Deleted Role] doesn&#39;t exist.\\nSource: LightLDAP\\n\\u00a0 \\u00a0at LightLDAP.MembershipResolver.GetRoleMembers(String roleName, String userPattern, Boolean includeIndirectMembers, Boolean throwIfRoleNotExist)\\n\\u00a0 \\u00a0at LightLDAP.SitecoreADRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.SwitchingRoleProvider.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Data.DataProviders.NullRetryer.Execute[T](Func`1 action, Action recover)\\n\\u00a0 \\u00a0at System.Web.Security.Roles.GetUsersInRole(String roleName)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetUsersInRole(Role targetRole, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Sitecore.Security.Accounts.RolesInRolesProvider.GetRoleMembers(Role role, Boolean includeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.Framework.Security.RolesInRolesManagerWrapper.GetRoleMembers(IRole p_Role, Boolean p_IncludeIndirectMembership)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.ExpandRoleMembers(String p_RoleName)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.CreateExpandedSecurityEntity(String p_EntityName, String p_EntityType, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()\\n\\u00a0 \\u00a0at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\\n\\u00a0 \\u00a0at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.EntitiesToEntitySet(IList`1 p_Entities, IList`1 p_WellKnowns)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.&lt;&gt;c__DisplayClass46.&lt;PushAllDomainEntities&gt;b__45(List`1 entities)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.EmptyBuffer(Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.Framework.Collections.BufferedBatchHandler`1.HandleElements(IEnumerable`1 p_Elements, Action`1 p_Operation)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomain(String p_DomainName, DomainSecurityEntities p_DomainSecurityEntities, SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomains(SecurityEntity p_GlobalEveryoneRole)\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSecurityEntityExpansions()\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.PerformRebuild(IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndexBase.Rebuild(IndexingOptions p_IndexingOptions, IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\\n\\u00a0 \\u00a0at Coveo.SearchProvider.ProviderIndex.Rebuild()</pre>\\n<br>The role mentioned in the stack trace is in the Active Directory recycle bin.\"], \"kav_attribute.url\": [\"/services/data/v34.0/sobjects/KB_Article__kav/ka10d0000000HLRAA2\"], \"kav_articlenumber__stripped\": [\"2529\"], \"sfversionnumber\": [1], \"kav_attribute.type\": [\"KB_Article__kav\"], \"kav_validationstatus\": [\"Reviewed\"], \"coveo_foldingparent\": [\"3e9ca4178db39eb92be9ff390138700f4fa40f76660aca5ebb2535f2cddd\"], \"collection\": [\"default\"], \"sfsourceid\": [\"5000d00001EXMm7AAH\"], \"date\": [1516534498], \"kav_lastmodifiedby.id\": [\"00560000002MKBSAA4\"], \"kav_datacategoryselections.datacategorygroupname\": [\"Article_Type;Product\"], \"conversionstate\": [0], \"sfvalidationstatus\": [\"Reviewed\"], \"kav_isdeleted\": [false], \"sflastmodifiedbyid\": [\"00560000002MKBSAA4\"], \"kav_lastmodifiedby.name\": [\"Karel Mpungi\"], \"kav_articlenumber\": [\"000002529\"], \"permanentid\": [\"4a4a0ad26ed8108d856efccaf4a7f8af4696e7de9a42b82ae6fd4b9294be\"]}",
      "sflastmodifiedbyid" : "00560000002MKBSAA4",
      "syssfownerid" : "00560000004BtvyAAC",
      "sfsitecoreversionc" : "N/A",
      "sourcetype" : "Salesforce",
      "sysconnectortype" : "Salesforce2",
      "sftitle" : "Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process",
      "rowid" : 5493069,
      "syssfcreatedbyid" : "00560000004BtvyAAC",
      "sfdescriptionc" : "Rebuilding sources fail, raising a &quot;System.Configuration.Provider.ProviderException&quot; exception, stating that a role does not exist.\n<pre class=\"ckeditor_codeblock\">\nException: System.Configuration.Provider.ProviderException\nMessage: The role [Deleted Role] doesn&#39;t exist.\nSource: LightLDAP\n   at LightLDAP.MembershipResolver.GetRoleMembers(String roleName, String userPattern, Boolean includeIndirectMembers, Boolean throwIfRoleNotExist)\n   at LightLDAP.SitecoreADRoleProvider.GetUsersInRole(String roleName)\n   at Sitecore.Security.SwitchingRoleProvider.GetUsersInRole(String roleName)\n   at Sitecore.Data.DataProviders.NullRetryer.Execute[T](Func`1 action, Action recover)\n   at System.Web.Security.Roles.GetUsersInRole(String roleName)\n   at Sitecore.Security.Accounts.RolesInRolesProvider.GetUsersInRole(Role targetRole, Boolean includeIndirectMembership)\n   at Sitecore.Security.Accounts.RolesInRolesProvider.GetRoleMembers(Role role, Boolean includeIndirectMembership)\n   at Coveo.Framework.Security.RolesInRolesManagerWrapper.GetRoleMembers(IRole p_Role, Boolean p_IncludeIndirectMembership)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.ExpandRoleMembers(String p_RoleName)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.CreateExpandedSecurityEntity(String p_EntityName, String p_EntityType, IList`1 p_WellKnowns)\n   at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()\n   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\n   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.EntitiesToEntitySet(IList`1 p_Entities, IList`1 p_WellKnowns)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.&lt;&gt;c__DisplayClass46.&lt;PushAllDomainEntities&gt;b__45(List`1 entities)\n   at Coveo.Framework.Collections.BufferedBatchHandler`1.EmptyBuffer(Action`1 p_Operation)\n   at Coveo.Framework.Collections.BufferedBatchHandler`1.HandleElements(IEnumerable`1 p_Elements, Action`1 p_Operation)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomain(String p_DomainName, DomainSecurityEntities p_DomainSecurityEntities, SecurityEntity p_GlobalEveryoneRole)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushExpansionForDomains(SecurityEntity p_GlobalEveryoneRole)\n   at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions()\n   at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSecurityEntityExpansions()\n   at Coveo.SearchProvider.ProviderIndexBase.PerformRebuild(IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\n   at Coveo.SearchProvider.ProviderIndexBase.Rebuild(IndexingOptions p_IndexingOptions, IProviderUpdateContext p_Context, Action`1 p_CrawlerAction)\n   at Coveo.SearchProvider.ProviderIndex.Rebuild()</pre>\n<br>The role mentioned in the stack trace is in the Active Directory recycle bin.",
      "size" : 9692,
      "sfislatestversion" : "true",
      "sysdocumenttype" : "article",
      "sfcreateddate" : 1504012832000,
      "sfsourceid" : "5000d00001EXMm7AAH",
      "clickableuri" : "https://na61.salesforce.com/kA10d00000008cy",
      "syssource" : "Salesforce Public Items",
      "sfownerid" : "00560000004BtvyAAC",
      "orderingid" : 212384990660371872,
      "sfpublishstatus" : "Online",
      "syssize" : 9692,
      "sysdate" : 1516534498000,
      "sflanguage" : "en_US",
      "sysparents" : "<?xml version=\"1.0\" encoding=\"utf-16\"?><parents><parent name=\"Organization\" uri=\"https://na61.salesforce.com/home/home.jsp\" /><parent name=\"KB_Article__ka\" uri=\"http://www.salesforce.com/org:organization/articletype:KB_Article\" /><parent name=\"Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process\" uri=\"https://na61.salesforce.com/kA10d00000008cy\" /></parents>",
      "sfdcexpandedarticletype" : "All;All|Problem/Fix",
      "sfcurrencyisocode" : "USD",
      "sfkbid" : "kA10d00000008cyCAA",
      "sfcausec" : "This is caused by a bug within the Sitecore AD module (LightLDAP)<br>The module is pushing identities, even when they are in the recycle bin.<br><br>This is breaking the indexing process within Coveo.",
      "sfdcexpandedproduct" : "All;All|Sitecore",
      "syssfcreateddate" : 1504012832000,
      "sflastmodifieddate" : 1505503155000,
      "sfisvisibleinpkb" : "true",
      "source" : "Salesforce Public Items",
      "sfisdeleted" : "false",
      "sfisvisibleincsp" : "true",
      "sfvalidationstatus" : "Reviewed",
      "sflastmodifiedbyname" : "Karel Mpungi",
      "collection" : "default",
      "sfdcproduct" : [ "Sitecore" ],
      "syssourcetype" : "Salesforce",
      "sfarticletype" : "KB_Article__kav",
      "indexeddate" : 1518187582000,
      "connectortype" : "Salesforce2",
      "filetype" : "SalesforceItem",
      "sfcreatedbyname" : "Benoit Garneau",
      "sysclickableuri" : "https://na61.salesforce.com/kA10d00000008cy",
      "sysfiletype" : "SalesforceItem",
      "sfvendorversionc" : "Sitecore",
      "language" : [ "English" ],
      "sffirstpublisheddate" : 1505503155000,
      "sfownername" : "Benoit Garneau",
      "sitename" : "Community",
      "sysrowid" : 5493069,
      "uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
      "syscollection" : "default"
    },
    "Title" : "Deleted AD roles are being pushed by Sitecore upon rebuild, breaking the process",
    "Uri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
    "PrintableUri" : "http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
    "ClickUri" : "https://na61.salesforce.com/kA10d00000008cy",
    "UniqueId" : "42.13819$http://www.salesforce.com/org:organization/articletype:KB_Article/article:kA10d00000008cyCAA/language:en_US",
    "Excerpt" : "at Coveo.CloudPlatformClient.SecurityProviderManagement.ExpandedPermissionsHandler.PushAllSecurityEntityExpansions() at Coveo.CloudPlatformClient.Communication.CloudPlatformCommunication.PushAllSec...",
    "FirstSentences" : null
  }